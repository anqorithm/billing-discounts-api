2025-09-01 00:02:24.200 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:02:24.213 [Thread-27] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:02:24.214 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:02:24.331 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:24.331 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:24.331 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:02:24.575 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:24.580 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:24.622 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:02:24.623 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:02:24.623 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:02:24.629 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:02:24.629 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 296 ms
2025-09-01 00:02:24.651 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:02:24.687 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:24.704 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:24.708 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:24.712 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:24.732 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@282aef40], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@5c6c546], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:24.735 [cluster-ClusterId{value='68b4b86090846375795be33f', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1956107, minRoundTripTimeNanos=0}
2025-09-01 00:02:24.746 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:02:24.807 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 06ed803d-ed4d-4813-a7ca-3a17460dba19

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:24.808 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:24.816 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:24.820 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:24.842 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:02:24.854 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.557 seconds (process running for 1611.925)
2025-09-01 00:02:24.857 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   ManagementWebSecurityAutoConfiguration matched:
      - found 'session' scope (OnWebApplicationCondition)
      - AllNestedConditions 2 matched 0 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) did not find any beans; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)

   MongoAutoConfiguration matched:
      - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongo matched:
      - @ConditionalOnMissingBean (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration.MongoClientSettingsConfiguration matched:
      - @ConditionalOnMissingBean (types: com.mongodb.MongoClientSettings; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mappingMongoConverter matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryConfiguration matched:
      - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) found a single bean 'mongo'; @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) did not find any beans (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)
      - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) found beans of type 'org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails' mongoConnectionDetails (OnBeanCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:02:26.234 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:02:26.236 [Thread-34] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:02:26.238 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:02:26.322 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:26.322 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:26.322 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:02:26.564 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:26.570 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:26.629 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:02:26.630 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:02:26.630 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:02:26.637 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:02:26.637 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 314 ms
2025-09-01 00:02:26.664 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:02:26.674 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:26.677 [cluster-ClusterId{value='68b4b86290846375795be340', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2783708, minRoundTripTimeNanos=0}
2025-09-01 00:02:26.726 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:26.743 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:26.771 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:26.779 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: dccb2193-2ed3-49de-ac3d-30bd209b82ae

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:26.779 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:26.787 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:26.799 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:26.804 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:26.848 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:02:26.862 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:02:26.874 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.572 seconds (process running for 1613.945)
2025-09-01 00:02:26.875 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:02:26.888 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:02:26.899 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:02:26.899 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:02:26.901 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' filterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   MongoAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoDatabaseFactory' mongoDbFactory (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)

   MongoDataConfiguration#mappingMongoConverter:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoConverter' mappingMongoConverter (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoCustomConversions' customConversions (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoManagedTypes' mongoManagedTypes (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.mapping.MongoMappingContext' mongoMappingContext (OnBeanCondition)

   MongoDatabaseFactoryConfiguration:
      Did not match:
         - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.MongoOperations' mongoTemplate (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) found beans named springSecurityFilterChain (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:02:28.389 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1700683 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:28.391 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:28.392 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:02:28.421 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:02:29.510 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:29.538 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:30.015 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@2a8e30e3, com.mongodb.Jep395RecordCodecProvider@31c56721, com.mongodb.KotlinCodecProvider@4cd51e4e]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:30.043 [cluster-ClusterId{value='68b4b865e738ba8e892d5530', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=19171931, minRoundTripTimeNanos=0}
2025-09-01 00:02:30.520 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:30.654 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:30.770 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:30.796 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 5c9c00fe-2df6-4fd2-ae76-0f900b8d462e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:30.803 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:30.890 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:31.025 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:31.058 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:31.309 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.443 seconds (process running for 5.724)
2025-09-01 00:02:31.364 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:02:31.502 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:02:31.520 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:02:31.520 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:02:32.181 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.184 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.185 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.189 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.190 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.190 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.271 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.319 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:02:32.424 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:32.426 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:32.426 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:32.440 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.444 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:02:32.500 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.503 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.504 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.504 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.504 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.505 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.509 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.514 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:02:32.541 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:02:32.551 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.553 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.554 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.554 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.554 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.554 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.562 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.566 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.580 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:32.580 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:32.580 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:02:32.582 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.587 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:32.601 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.603 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.604 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.604 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.604 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.604 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.605 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:02:32.608 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.609 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={name=Billing Discoun (truncated)...]
2025-09-01 00:02:32.622 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.625 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.626 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.626 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.626 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.626 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.630 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.634 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.662 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:02:32.670 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.673 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.673 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.674 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.674 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.674 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.678 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.682 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.702 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:02:32.707 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.709 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.709 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.710 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.710 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.710 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.710 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:02:32.711 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:02:32.713 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.713 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:02:32.720 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.722 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.722 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.722 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.722 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.722 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.723 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.725 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:02:32.736 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:02:32.743 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.744 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.745 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.745 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.745 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.745 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.747 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.749 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.760 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:32.760 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:02:32.761 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:02:32.763 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.763 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:32.778 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.780 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.780 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.781 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.781 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.781 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.784 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.787 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:02:32.801 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:02:32.802 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:32.802 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:32.806 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.807 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:02:32.817 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.820 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.820 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.821 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.821 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.821 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.825 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.829 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.848 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:32.848 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:32.849 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:32.853 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.854 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:02:32.865 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.868 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.868 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.869 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.869 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.869 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.872 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.875 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.892 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:02:32.892 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:02:32.893 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:02:32.896 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.896 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:32.915 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:32.917 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:32.917 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:32.918 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:32.918 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:32.918 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:32.921 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:32.924 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:32.938 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:32.938 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:32.939 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:02:32.941 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:32.942 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:32.957 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:02:28 AST 2025
2025-09-01 00:02:39.272 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:02:39.274 [Thread-38] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:02:39.275 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:02:39.374 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:39.374 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:39.374 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:02:39.596 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:39.598 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 0 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:39.644 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:02:39.645 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:02:39.645 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:02:39.654 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:02:39.654 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 278 ms
2025-09-01 00:02:39.695 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:02:39.736 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:39.751 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:39.755 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:39.760 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:39.778 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@149bdaa9], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@53335163], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:39.781 [cluster-ClusterId{value='68b4b86f90846375795be341', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2314128, minRoundTripTimeNanos=0}
2025-09-01 00:02:39.838 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: cd3debad-58ac-47df-8e07-a1cc2ba897f6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:39.838 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:39.847 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:39.851 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:39.864 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:02:39.879 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:02:39.892 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.544 seconds (process running for 1626.963)
2025-09-01 00:02:39.895 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   ManagementWebSecurityAutoConfiguration matched:
      - found 'session' scope (OnWebApplicationCondition)
      - AllNestedConditions 2 matched 0 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) did not find any beans; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)

   MongoAutoConfiguration matched:
      - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongo matched:
      - @ConditionalOnMissingBean (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration.MongoClientSettingsConfiguration matched:
      - @ConditionalOnMissingBean (types: com.mongodb.MongoClientSettings; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mappingMongoConverter matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryConfiguration matched:
      - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) found a single bean 'mongo'; @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) did not find any beans (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)
      - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) found beans of type 'org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails' mongoConnectionDetails (OnBeanCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:02:41.269 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:02:41.271 [Thread-42] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:02:41.272 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:02:41.373 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:41.374 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:41.374 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:02:41.593 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:41.597 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:41.659 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:02:41.659 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:02:41.659 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:02:41.666 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:02:41.666 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 291 ms
2025-09-01 00:02:41.693 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:02:41.703 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:41.706 [cluster-ClusterId{value='68b4b87190846375795be342', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2800718, minRoundTripTimeNanos=0}
2025-09-01 00:02:41.768 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:41.784 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:41.812 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:41.821 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: fb821a96-4371-4fb2-a47e-760240b03343

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:41.821 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:41.828 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:41.840 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:41.845 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:41.893 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:02:41.908 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:02:41.921 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.575 seconds (process running for 1628.992)
2025-09-01 00:02:41.923 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:02:41.936 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:02:41.946 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:02:41.946 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:02:41.947 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' filterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   MongoAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoDatabaseFactory' mongoDbFactory (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)

   MongoDataConfiguration#mappingMongoConverter:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoConverter' mappingMongoConverter (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoCustomConversions' customConversions (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoManagedTypes' mongoManagedTypes (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.mapping.MongoMappingContext' mongoMappingContext (OnBeanCondition)

   MongoDatabaseFactoryConfiguration:
      Did not match:
         - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.MongoOperations' mongoTemplate (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) found beans named springSecurityFilterChain (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:02:43.767 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1701464 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:02:43.768 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:02:43.769 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:02:43.795 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:02:44.887 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:02:44.924 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:02:45.366 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4e343265, com.mongodb.Jep395RecordCodecProvider@4301fa39, com.mongodb.KotlinCodecProvider@73dd0f23]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:02:45.395 [cluster-ClusterId{value='68b4b875bb08aceb68bb9988', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=21164276, minRoundTripTimeNanos=0}
2025-09-01 00:02:45.867 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:02:46.003 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:02:46.121 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:02:46.158 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c5665ddb-fc7a-48e0-828c-555591aa0931

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:02:46.166 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:02:46.247 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:02:46.388 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:46.442 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:46.718 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.505 seconds (process running for 5.925)
2025-09-01 00:02:46.773 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:02:46.928 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:02:46.949 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:02:46.950 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:02:47.528 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:47.530 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:47.531 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:47.535 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:47.535 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:47.535 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:47.618 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:47.676 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:02:47.775 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:47.777 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:47.778 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:47.796 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:47.799 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:02:47.852 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:47.857 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:47.858 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:47.858 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:47.859 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:47.859 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:47.862 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:47.866 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:02:47.894 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:02:47.904 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:47.906 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:47.906 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:47.906 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:47.907 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:47.907 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:47.914 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:47.918 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:47.933 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:47.933 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:47.934 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:02:47.936 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:47.940 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:47.954 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:47.956 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:47.956 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:47.956 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:47.956 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:47.956 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:47.957 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:02:47.959 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:47.960 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={description=RESTful  (truncated)...]
2025-09-01 00:02:47.972 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:47.974 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:47.974 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:47.975 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:47.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:47.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:47.978 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:47.981 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.000 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:02:48.014 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.016 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.017 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.017 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.017 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.017 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.021 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.023 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.034 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:02:48.040 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.042 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.042 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.042 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.043 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:02:48.043 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:02:48.045 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.045 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:02:48.051 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.052 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.053 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.053 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.053 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.053 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.054 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.056 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:02:48.067 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:02:48.075 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.076 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.077 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.077 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.078 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.078 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.081 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.083 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.094 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:48.094 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:02:48.095 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:02:48.096 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.097 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:48.107 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.108 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.109 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.109 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.109 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.109 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.111 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.113 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:02:48.123 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:02:48.123 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:48.124 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:48.126 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.127 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:02:48.133 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.135 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.135 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.135 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.135 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.135 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.138 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.140 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.150 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:48.150 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:48.151 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:02:48.153 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.153 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:02:48.160 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.161 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.161 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.161 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.161 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.161 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.164 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.165 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.176 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:02:48.176 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:02:48.176 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:02:48.177 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.178 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:48.194 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:02:48.195 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:02:48.196 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:02:48.196 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:02:48.196 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:02:48.196 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:02:48.199 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:02:48.201 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:02:48.212 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:02:48.212 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:02:48.213 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:02:48.214 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:02:48.215 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:02:48.229 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:02:43 AST 2025
2025-09-01 00:03:22.368 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:03:22.371 [Thread-46] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:03:22.372 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:03:22.477 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:03:22.477 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:03:22.477 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:03:22.714 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:03:22.724 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:03:22.764 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:03:22.764 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:03:22.764 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:03:22.770 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:03:22.770 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 291 ms
2025-09-01 00:03:22.796 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:03:22.803 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'billCalculationService' defined in file [/home/abdullah/Desktop/billing-discounts-api/target/classes/sa/billing/discounts/application/service/BillCalculationService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-09-01 00:03:22.803 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-01 00:03:22.815 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-01 00:03:22.818 [restartedMain] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in sa.billing.discounts.application.service.BillCalculationService required a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' in your configuration.

2025-09-01 00:03:24.247 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:03:24.247 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:03:24.247 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:03:24.497 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:03:24.501 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:03:24.550 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:03:24.550 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:03:24.550 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:03:24.556 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:03:24.556 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 308 ms
2025-09-01 00:03:24.581 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:03:24.591 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:03:24.595 [cluster-ClusterId{value='68b4b89c90846375795be343', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2590610, minRoundTripTimeNanos=0}
2025-09-01 00:03:24.649 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:03:24.664 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:03:24.690 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:03:24.698 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 3efc8905-1840-4989-957a-3226d889997b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:03:24.699 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:03:24.706 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:03:24.718 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:24.722 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:24.762 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:03:24.774 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:03:24.787 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.559 seconds (process running for 1671.857)
2025-09-01 00:03:24.788 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:03:24.800 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:03:24.808 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:03:24.808 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:03:24.810 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:03:26.485 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1703590 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:03:26.487 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:03:26.488 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:03:26.517 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:03:27.781 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:03:27.812 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:03:28.344 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@7e451790, com.mongodb.Jep395RecordCodecProvider@25172993, com.mongodb.KotlinCodecProvider@3f71ae7f]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:03:28.363 [cluster-ClusterId{value='68b4b8a095429d1684d3dd12', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=15149408, minRoundTripTimeNanos=0}
2025-09-01 00:03:28.825 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:03:28.923 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:03:29.051 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:03:29.078 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 2022e862-1376-4afb-ac2b-63b096f2afe7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:03:29.085 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:03:29.165 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:03:29.288 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:29.330 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:29.595 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.659 seconds (process running for 6.038)
2025-09-01 00:03:29.648 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:03:29.785 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:03:29.809 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:03:29.809 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:03:30.386 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.390 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.390 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.395 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.395 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.396 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:03:30.480 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.529 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:03:30.639 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:03:30.641 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:03:30.642 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:03:30.659 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:30.663 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:03:30.712 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.714 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.715 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.715 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.715 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.715 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.718 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.721 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:03:30.749 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:03:30.761 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.764 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.765 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.765 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.765 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.766 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:03:30.773 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.778 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:30.804 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:03:30.805 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:03:30.805 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:03:30.807 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:30.812 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:03:30.828 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.830 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.830 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.830 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.831 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.831 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.832 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:03:30.834 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:30.834 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={description=RESTful  (truncated)...]
2025-09-01 00:03:30.846 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.848 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.848 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.848 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.848 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.849 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.851 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.854 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:30.877 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:03:30.885 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.887 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.888 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.888 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.888 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.888 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.892 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.896 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:30.908 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:03:30.914 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.915 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.915 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.916 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.916 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.916 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.916 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:03:30.917 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:03:30.919 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:30.919 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:03:30.925 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.926 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.927 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.927 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.927 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.927 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.928 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.930 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:03:30.944 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:03:30.951 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.953 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.953 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.953 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.953 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.953 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.956 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.958 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:30.968 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:03:30.968 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:03:30.969 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:03:30.971 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:30.971 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:03:30.983 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:30.984 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:30.985 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:30.985 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:30.985 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:30.985 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:30.988 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:30.990 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:03:31.000 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:03:31.000 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:03:31.001 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:03:31.004 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:31.005 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:03:31.013 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:31.015 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:31.015 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:31.015 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:31.015 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:31.016 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:31.018 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:31.019 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:31.029 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:03:31.029 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:03:31.030 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:03:31.032 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:31.033 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:03:31.041 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:31.043 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:31.044 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:31.044 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:31.044 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:31.044 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:31.047 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:31.050 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:31.060 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:03:31.061 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:03:31.061 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:03:31.063 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:31.064 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:03:31.080 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:03:31.081 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:03:31.081 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:03:31.081 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:03:31.082 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:03:31.082 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:03:31.084 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:03:31.086 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:03:31.095 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:03:31.095 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:03:31.095 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:03:31.097 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:03:31.097 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:03:31.111 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:03:26 AST 2025
2025-09-01 00:04:03.637 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:04:03.640 [Thread-50] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:04:03.641 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:04:03.743 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:04:03.743 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:04:03.743 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:04:03.982 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:04:03.983 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 0 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:04:04.030 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:04:04.031 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:04:04.031 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:04:04.037 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:04:04.037 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 293 ms
2025-09-01 00:04:04.061 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:04:04.090 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:04:04.103 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:04:04.107 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:04.111 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:04.129 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@1df97025], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@2adc3029], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:04:04.132 [cluster-ClusterId{value='68b4b8c490846375795be344', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1995568, minRoundTripTimeNanos=0}
2025-09-01 00:04:04.184 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 038263f1-ee5d-404d-93dc-db54b6e255ce

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:04:04.185 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:04:04.193 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:04:04.196 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:04:04.206 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:04:04.219 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:04:04.231 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.509 seconds (process running for 1711.301)
2025-09-01 00:04:04.234 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   ManagementWebSecurityAutoConfiguration matched:
      - found 'session' scope (OnWebApplicationCondition)
      - AllNestedConditions 2 matched 0 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) did not find any beans; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)

   MongoAutoConfiguration matched:
      - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongo matched:
      - @ConditionalOnMissingBean (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration.MongoClientSettingsConfiguration matched:
      - @ConditionalOnMissingBean (types: com.mongodb.MongoClientSettings; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mappingMongoConverter matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryConfiguration matched:
      - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) found a single bean 'mongo'; @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) did not find any beans (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)
      - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) found beans of type 'org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails' mongoConnectionDetails (OnBeanCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:04:05.611 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:04:05.614 [Thread-57] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:04:05.615 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:04:05.713 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:04:05.713 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:04:05.714 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:04:05.961 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:04:05.964 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:04:06.021 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:04:06.021 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:04:06.021 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:04:06.028 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:04:06.028 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 313 ms
2025-09-01 00:04:06.055 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:04:06.064 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:04:06.066 [cluster-ClusterId{value='68b4b8c690846375795be345', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2044323, minRoundTripTimeNanos=0}
2025-09-01 00:04:06.126 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:04:06.143 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:04:06.183 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:04:06.191 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 3cc15b51-7f7f-4a5e-b6cf-ebee6121504e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:04:06.192 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:04:06.201 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:04:06.213 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:06.218 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:06.260 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:04:06.275 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:04:06.287 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.593 seconds (process running for 1713.358)
2025-09-01 00:04:06.289 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:04:06.301 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:04:06.311 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:04:06.311 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:04:06.313 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' filterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   MongoAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoDatabaseFactory' mongoDbFactory (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)

   MongoDataConfiguration#mappingMongoConverter:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoConverter' mappingMongoConverter (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoCustomConversions' customConversions (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoManagedTypes' mongoManagedTypes (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.mapping.MongoMappingContext' mongoMappingContext (OnBeanCondition)

   MongoDatabaseFactoryConfiguration:
      Did not match:
         - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.MongoOperations' mongoTemplate (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) found beans named springSecurityFilterChain (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:04:08.028 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1705458 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:04:08.029 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:04:08.031 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:04:08.059 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:04:09.168 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:04:09.193 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:04:09.657 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4cd51e4e, com.mongodb.Jep395RecordCodecProvider@7e451790, com.mongodb.KotlinCodecProvider@25172993]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:04:09.679 [cluster-ClusterId{value='68b4b8c9b6ba2e35d8442c9a', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=15563561, minRoundTripTimeNanos=0}
2025-09-01 00:04:10.171 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:04:10.302 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:04:10.413 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:04:10.440 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 954e81b3-1872-4245-a6fa-2134f4785d0e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:04:10.447 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:04:10.530 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:04:10.667 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:10.714 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:10.978 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.495 seconds (process running for 5.839)
2025-09-01 00:04:11.026 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:04:11.173 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:04:11.195 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:04:11.195 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:04:11.738 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:11.740 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:11.740 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:11.743 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:11.744 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:11.744 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:11.821 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:11.868 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:04:11.975 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:11.977 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:11.977 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:11.991 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:11.994 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:04:12.039 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.041 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.042 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.042 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.044 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.047 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:04:12.091 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:04:12.103 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.105 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.105 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.106 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.106 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.106 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.115 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.122 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.160 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:12.160 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:12.160 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:04:12.163 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.170 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:12.190 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.192 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.192 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.193 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.193 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.193 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.194 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:04:12.196 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.196 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={name=Billing Discoun (truncated)...]
2025-09-01 00:04:12.207 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.212 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.213 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.213 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.214 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.214 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.219 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.226 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.254 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:04:12.263 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.265 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.266 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.266 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.266 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.266 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.270 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.273 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.289 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:04:12.298 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.300 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.300 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.301 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.302 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.302 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.303 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:04:12.303 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:04:12.306 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.307 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:04:12.321 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.325 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.326 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.326 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.326 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.326 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.327 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.330 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:04:12.346 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:04:12.353 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.355 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.355 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.355 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.358 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.361 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.376 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:12.377 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:04:12.378 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:04:12.381 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.381 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:12.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.397 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.397 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.398 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.398 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.398 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.401 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.404 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:04:12.417 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:04:12.418 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:12.419 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:12.423 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.424 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:04:12.435 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.437 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.438 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.438 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.438 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.438 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.440 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.443 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.453 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:12.454 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:12.455 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:12.459 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.459 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:04:12.467 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.468 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.468 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.468 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.469 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.469 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.471 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.473 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.483 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:04:12.483 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:04:12.483 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:04:12.485 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.485 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:12.500 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:12.502 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:12.502 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:12.503 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:12.503 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:12.503 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:12.505 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:12.507 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:12.518 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:12.518 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:12.519 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:04:12.520 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:12.520 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:12.536 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:04:08 AST 2025
2025-09-01 00:04:32.584 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1706546 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:04:32.585 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:04:32.586 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:04:32.610 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:04:33.683 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:04:33.716 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:04:34.188 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4301fa39, com.mongodb.Jep395RecordCodecProvider@73dd0f23, com.mongodb.KotlinCodecProvider@38d4488c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:04:34.215 [cluster-ClusterId{value='68b4b8e2b6f6b28339d5a4de', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=20441939, minRoundTripTimeNanos=0}
2025-09-01 00:04:34.706 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:04:34.850 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:04:34.980 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:04:35.015 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 567a7331-f6d9-43f0-a59f-710195e15785

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:04:35.024 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:04:35.112 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:04:35.257 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:35.301 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:35.548 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.452 seconds (process running for 5.63)
2025-09-01 00:04:35.600 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:04:35.739 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:04:35.759 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:04:35.759 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:04:36.314 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.316 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.317 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.323 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.323 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.324 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.412 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.472 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:04:36.576 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:36.578 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:36.578 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:36.594 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.597 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:04:36.661 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.664 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.665 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.666 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.666 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.666 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.669 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.673 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:04:36.705 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:04:36.716 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.719 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.719 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.720 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.720 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.720 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.727 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.730 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.747 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:36.747 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:36.747 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:04:36.749 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.753 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:36.767 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.769 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.769 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.770 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.770 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.770 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.770 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:04:36.772 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.773 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={name=Billing Discoun (truncated)...]
2025-09-01 00:04:36.782 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.784 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.785 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.785 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.785 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.785 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.787 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.790 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.804 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:04:36.810 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.812 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.812 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.812 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.812 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.813 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.815 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.818 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.829 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:04:36.835 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.837 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.837 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.837 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.837 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.838 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.838 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:04:36.838 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:04:36.841 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.841 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:04:36.850 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.851 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.852 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.852 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.852 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.852 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.853 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.855 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:04:36.873 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:04:36.879 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.880 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.880 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.881 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.881 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.881 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.883 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.885 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.899 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:36.899 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:04:36.899 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:04:36.902 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.902 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:36.913 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.914 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.915 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.915 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.915 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.915 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.917 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.920 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:04:36.930 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:04:36.930 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:36.931 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:36.933 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.934 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:04:36.942 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.944 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.944 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.944 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.944 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.944 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.947 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.949 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.959 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:36.959 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:36.959 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:04:36.961 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.961 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:04:36.967 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:36.969 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:36.969 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:36.969 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:36.969 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:36.969 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:36.971 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:36.973 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:36.982 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:04:36.983 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:04:36.983 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:04:36.984 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:36.985 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:37.000 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:04:37.001 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:04:37.002 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:04:37.002 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:04:37.002 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:04:37.002 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:04:37.004 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:04:37.006 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:04:37.016 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:04:37.016 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:04:37.016 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:04:37.018 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:04:37.019 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:04:37.037 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:04:32 AST 2025
2025-09-01 00:08:20.767 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1713619 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:08:20.768 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:08:20.769 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:08:20.802 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b
2025-09-01 00:08:21.951 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:08:21.982 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:08:22.429 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@36b761e3, com.mongodb.Jep395RecordCodecProvider@e27d97b, com.mongodb.KotlinCodecProvider@285c63cf]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:08:22.451 [cluster-ClusterId{value='68b4b9c660e0b2d5cd782fe2', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=17076551, minRoundTripTimeNanos=0}
2025-09-01 00:08:22.929 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:08:23.055 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:08:23.177 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:08:23.209 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 03f55d4d-e6b7-4705-a2ff-2bd0b3dfa11e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:08:23.216 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:08:23.302 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:08:23.429 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:23.471 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:23.703 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.504 seconds (process running for 5.871)
2025-09-01 00:08:23.759 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:08:23.885 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:08:23.902 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:08:23.902 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:08:24.428 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.430 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.430 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.434 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.435 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.435 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.503 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.545 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:08:24.640 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:24.642 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:24.643 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:08:24.655 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.659 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:08:24.703 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.706 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.706 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.706 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.706 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.707 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.709 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.713 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:08:24.742 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:08:24.756 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.758 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.759 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.759 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.759 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.760 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:08:24.774 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.778 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:24.795 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:24.796 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:24.796 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:08:24.799 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.803 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:24.819 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.821 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.821 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.821 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.821 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.821 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.822 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:08:24.824 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.824 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={name=Billing Discoun (truncated)...]
2025-09-01 00:08:24.834 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.836 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.836 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.836 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.836 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.836 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.839 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.842 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:24.854 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:08:24.860 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.862 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.862 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.862 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.862 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.863 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:08:24.865 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.868 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:24.879 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:08:24.885 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.886 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.887 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.887 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.887 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.887 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.888 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:08:24.888 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:08:24.890 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.891 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:08:24.898 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.899 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.899 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.900 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.900 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.900 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.900 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.904 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:08:24.917 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:08:24.924 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.926 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.926 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.926 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.926 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.926 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.929 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.931 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:24.941 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:24.941 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:24.941 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:08:24.943 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.943 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:24.953 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.955 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.955 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.955 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.955 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.955 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.958 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.960 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:08:24.970 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:08:24.970 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:24.971 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:08:24.974 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.974 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:08:24.981 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:24.982 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:24.983 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:24.983 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:24.983 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:24.983 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:24.985 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:24.987 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:24.997 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:24.997 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:24.997 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:51)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:08:24.999 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:24.999 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:08:25.006 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:25.008 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:25.008 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:25.009 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:25.009 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:25.009 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:25.011 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:25.014 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:25.025 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:25.026 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:08:25.026 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:08:25.027 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:25.028 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:25.044 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:08:25.046 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:08:25.046 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:08:25.046 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:08:25.047 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:08:25.047 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:08:25.050 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:25.052 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:25.066 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:25.067 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:25.067 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:08:25.069 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:25.070 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:25.089 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5df7e31b, started on Mon Sep 01 00:08:20 AST 2025
2025-09-01 00:08:27.531 [http-nio-8080-exec-1] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-01 00:08:27.532 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-01 00:08:27.532 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-01 00:08:27.532 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-01 00:08:27.532 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-01 00:08:27.533 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@456904b
2025-09-01 00:08:27.533 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7fee1e3d
2025-09-01 00:08:27.533 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-01 00:08:27.533 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:08:27.551 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /actuator/health
2025-09-01 00:08:27.566 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /actuator/health
2025-09-01 00:08:27.569 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-09-01 00:08:27.590 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-09-01 00:08:27.610 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [application/json] and supported [application/json]
2025-09-01 00:08:27.613 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@6b77d93c]
2025-09-01 00:08:27.631 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:27.632 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:30.797 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:30.798 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:30.798 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:30.799 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:30.829 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:30.917 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:08:30.919 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:30.929 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $986.98
2025-09-01 00:08:30.932 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:30.936 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:30.941 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:30.941 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:30.982 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /actuator/health
2025-09-01 00:08:30.984 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /actuator/health
2025-09-01 00:08:30.984 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-09-01 00:08:30.986 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-09-01 00:08:30.990 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-09-01 00:08:30.991 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@36c9364c]
2025-09-01 00:08:30.993 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:30.994 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:36.826 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:36.827 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:36.828 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:36.828 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:36.829 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:36.829 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:36.829 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:36.840 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:36.841 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:36.841 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:36.842 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:36.842 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:37.322 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:37.323 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:37.323 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:37.323 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:37.324 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:37.325 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:37.325 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:37.334 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:37.335 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:37.336 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:37.337 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:37.337 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:37.556 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:37.557 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:37.557 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:37.558 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:37.559 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:37.559 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:37.559 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:37.568 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:37.569 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:37.569 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:37.570 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:37.570 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:37.763 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:37.765 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:37.765 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:37.766 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:37.767 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:37.768 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:37.768 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:37.778 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:37.779 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:37.779 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:37.780 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:37.780 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:37.980 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:37.981 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:37.981 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:37.982 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:37.983 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:37.983 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:37.983 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:37.991 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:37.992 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:37.992 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:37.993 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:37.993 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:38.731 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:38.732 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:38.732 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:38.733 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:38.734 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:38.735 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:38.735 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:38.745 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:38.745 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:38.746 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:38.747 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:38.747 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:38.986 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:38.987 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:38.987 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:38.987 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:38.989 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:38.990 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:38.990 [http-nio-8080-exec-10] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:38.999 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:39.000 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:39.000 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:39.002 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:39.002 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:39.218 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:39.219 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:39.220 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:39.220 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:39.221 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:39.221 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:39.221 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:39.230 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:39.230 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:39.231 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:39.232 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:39.232 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:39.441 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:39.442 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:39.442 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:39.442 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:39.443 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:39.444 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:39.444 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:39.452 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:39.453 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:39.453 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:39.454 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:39.454 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:39.818 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:39.819 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:39.820 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:39.820 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:39.821 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:39.822 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:39.822 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:39.830 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:39.830 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:39.831 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:39.832 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:39.832 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:40.027 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:40.027 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:40.028 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:40.028 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:40.029 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:40.030 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:08:40.030 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:08:40.039 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $85.50
2025-09-01 00:08:40.040 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:40.040 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:40.041 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:40.041 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:08:40.957 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:08:40.958 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:08:40.958 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:08:40.959 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:08:40.960 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e3', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:08:40.961 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e3
2025-09-01 00:08:40.961 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:08:40.968 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e3 | Total: $1350.00
2025-09-01 00:08:40.969 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:08:40.969 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:08:40.970 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:08:40.970 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:09:08.716 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:09:08.716 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:09:08.716 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:09:08.717 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:09:08.717 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e4', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:09:08.718 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e4
2025-09-01 00:09:08.718 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:09:08.726 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e4 | Total: $1450.00
2025-09-01 00:09:08.726 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:09:08.727 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:09:08.727 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:09:08.728 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:11:46.943 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (0 additions, 35 deletions, 7 modifications)
2025-09-01 00:11:46.944 [Thread-61] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:11:46.946 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:11:46.997 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:11:46.997 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:11:46.997 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:11:47.145 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:11:47.146 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 0 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:11:47.176 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:11:47.176 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:11:47.176 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:11:47.179 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:11:47.180 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 183 ms
2025-09-01 00:11:47.194 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:11:47.218 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 6 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:11:47.230 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:11:47.233 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:11:47.236 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:11:47.251 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@6dd0dcf3], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@5b1c2a28], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:11:47.254 [cluster-ClusterId{value='68b4ba9390846375795be346', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2382795, minRoundTripTimeNanos=0}
2025-09-01 00:11:47.293 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 66dd4fc4-2c67-4257-a530-44b20ffb9cea

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:11:47.294 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:11:47.299 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:11:47.301 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:11:47.309 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:11:47.320 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:11:47.326 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.347 seconds (process running for 2174.397)
2025-09-01 00:11:47.328 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   ManagementWebSecurityAutoConfiguration matched:
      - found 'session' scope (OnWebApplicationCondition)
      - AllNestedConditions 2 matched 0 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) did not find any beans; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)

   MongoAutoConfiguration matched:
      - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongo matched:
      - @ConditionalOnMissingBean (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoAutoConfiguration.MongoClientSettingsConfiguration matched:
      - @ConditionalOnMissingBean (types: com.mongodb.MongoClientSettings; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mappingMongoConverter matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryConfiguration matched:
      - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) found a single bean 'mongo'; @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate matched:
      - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) did not find any beans (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)
      - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) found beans of type 'org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails' mongoConnectionDetails (OnBeanCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:12:17.534 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (35 additions, 0 deletions, 7 modifications)
2025-09-01 00:12:17.544 [Thread-65] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:12:17.545 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:12:17.599 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:12:17.599 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:12:17.599 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:12:17.732 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:12:17.734 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:12:17.763 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:12:17.763 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:12:17.763 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:12:17.766 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:12:17.766 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 166 ms
2025-09-01 00:12:17.780 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:12:17.785 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:12:17.787 [cluster-ClusterId{value='68b4bab190846375795be347', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1588277, minRoundTripTimeNanos=0}
2025-09-01 00:12:17.812 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:12:17.823 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:12:17.837 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:12:17.841 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 3084df5d-02c3-4371-8add-6c530cb4769b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:12:17.841 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:12:17.845 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:12:17.851 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:12:17.854 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:12:17.873 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:12:17.881 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:12:17.888 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.307 seconds (process running for 2204.959)
2025-09-01 00:12:17.889 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:12:17.895 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:12:17.900 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:12:17.900 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:12:17.901 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   MongoDataAutoConfiguration#mongoConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.mongo.MongoConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

   ManagementWebSecurityAutoConfiguration:
      Did not match:
         - AllNestedConditions 1 matched 1 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) found beans of type 'org.springframework.security.web.SecurityFilterChain' filterChain; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)
      Matched:
         - found 'session' scope (OnWebApplicationCondition)

   MongoAutoConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoDatabaseFactory; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoDatabaseFactory' mongoDbFactory (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'com.mongodb.client.MongoClient' (OnClassCondition)

   MongoDataConfiguration#mappingMongoConverter:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoConverter; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoConverter' mappingMongoConverter (OnBeanCondition)

   MongoDataConfiguration#mongoCustomConversions:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.convert.MongoCustomConversions; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.convert.MongoCustomConversions' customConversions (OnBeanCondition)

   MongoDataConfiguration#mongoManagedTypes:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.MongoManagedTypes; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.MongoManagedTypes' mongoManagedTypes (OnBeanCondition)

   MongoDataConfiguration#mongoMappingContext:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.mapping.MongoMappingContext; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.mapping.MongoMappingContext' mongoMappingContext (OnBeanCondition)

   MongoDatabaseFactoryConfiguration:
      Did not match:
         - @ConditionalOnSingleCandidate (types: com.mongodb.client.MongoClient; SearchStrategy: all) did not find any beans (OnBeanCondition)

   MongoDatabaseFactoryDependentConfiguration#mongoTemplate:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.data.mongodb.core.MongoOperations; SearchStrategy: all) found beans of type 'org.springframework.data.mongodb.core.MongoOperations' mongoTemplate (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) found beans named springSecurityFilterChain (OnBeanCondition)
      Matched:
         - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-09-01 00:12:55.324 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (0 additions, 0 deletions, 42 modifications)
2025-09-01 00:12:55.325 [Thread-69] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:12:55.326 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:12:55.386 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:12:55.386 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:12:55.386 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:12:55.506 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:12:55.508 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:12:55.537 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:12:55.537 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:12:55.537 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:12:55.541 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:12:55.541 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 154 ms
2025-09-01 00:12:55.555 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:12:55.561 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:12:55.564 [cluster-ClusterId{value='68b4bad790846375795be348', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2290987, minRoundTripTimeNanos=0}
2025-09-01 00:12:55.594 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:12:55.606 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:12:55.628 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:12:55.633 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 89cb910f-2fd1-43eb-94de-23050807c804

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:12:55.633 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:12:55.637 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:12:55.644 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:12:55.647 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:12:55.673 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:12:55.684 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:12:55.695 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.321 seconds (process running for 2242.766)
2025-09-01 00:12:55.696 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:12:55.705 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:12:55.713 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:12:55.713 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:12:55.714 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:13:04.367 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1723901 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:13:04.368 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:13:04.368 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:13:04.386 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:13:05.048 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:13:05.073 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:13:05.331 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3f71ae7f, com.mongodb.Jep395RecordCodecProvider@5b32e0b1, com.mongodb.KotlinCodecProvider@d1d85d0]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:13:05.350 [cluster-ClusterId{value='68b4bae13090dfb2925a5384', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=11696971, minRoundTripTimeNanos=0}
2025-09-01 00:13:05.650 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:13:05.729 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:13:05.824 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:13:05.842 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ae8b97d0-54dc-43ed-ab4f-c23617a07f7e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:13:05.847 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:13:05.897 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:13:05.990 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.016 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.167 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.1 seconds (process running for 3.425)
2025-09-01 00:13:06.219 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:13:06.303 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:13:06.317 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:13:06.317 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:13:06.618 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.619 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.620 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.622 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.622 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.622 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.656 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.681 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:13:06.730 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:06.731 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:06.732 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:13:06.741 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.743 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:13:06.777 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.778 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.779 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.779 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.779 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.779 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.780 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.782 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:13:06.805 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:13:06.810 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.811 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.811 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.812 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.812 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.812 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.815 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.817 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.826 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:06.826 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:06.826 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:13:06.828 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.831 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:06.840 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.841 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.841 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.841 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.841 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.842 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.842 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:13:06.844 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.844 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={endpoints={swagger=/ (truncated)...]
2025-09-01 00:13:06.850 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.851 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.852 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.852 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.852 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.852 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.854 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.855 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.863 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:13:06.869 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.871 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.871 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.871 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.871 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.871 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.873 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.875 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.883 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:13:06.888 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.889 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.890 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.890 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.890 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.890 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.890 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:13:06.891 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:13:06.892 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.893 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:13:06.901 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.902 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.902 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.902 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.902 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.903 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:13:06.903 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.905 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:13:06.913 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:13:06.918 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.919 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.919 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.919 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.919 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.919 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.921 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.922 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.930 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:06.930 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:13:06.930 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:13:06.932 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.932 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:06.939 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.939 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.940 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.940 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.940 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.940 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.942 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.943 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:13:06.949 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:13:06.949 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:06.949 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:13:06.951 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.951 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:13:06.956 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.957 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.957 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.957 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.957 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.957 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.959 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.960 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.966 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:06.967 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:06.967 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:13:06.969 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.969 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:13:06.973 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.974 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.975 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.975 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:06.976 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:06.978 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:06.983 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:13:06.984 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:13:06.984 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:13:06.985 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:06.985 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:06.998 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:13:06.999 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:13:06.999 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:13:06.999 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:13:06.999 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:13:06.999 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:13:07.001 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:07.002 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:07.008 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:07.008 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:07.008 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:13:07.009 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:07.010 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:07.021 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:13:04 AST 2025
2025-09-01 00:13:42.542 [http-nio-8080-exec-1] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-01 00:13:42.542 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-01 00:13:42.542 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-01 00:13:42.542 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-01 00:13:42.542 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-01 00:13:42.543 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3fbe3583
2025-09-01 00:13:42.543 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3179dc04
2025-09-01 00:13:42.543 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-01 00:13:42.543 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:13:42.544 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:42.545 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:42.545 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:42.545 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:42.548 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:42.560 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:42.560 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:42.567 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:13:42.569 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:42.571 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:42.574 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:42.574 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:43.509 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:43.510 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:43.510 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:43.510 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:43.511 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:43.511 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:43.511 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:43.516 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:13:43.516 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:43.517 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:43.517 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:43.517 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:43.727 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:43.728 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:43.728 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:43.728 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:43.730 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:43.730 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:43.730 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:43.734 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:13:43.734 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:43.734 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:43.735 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:43.735 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:53.140 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:53.141 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:53.141 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:53.141 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:53.142 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:53.142 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:53.142 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:53.145 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:53.146 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:53.146 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:53.147 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:53.147 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:53.709 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:53.710 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:53.710 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:53.710 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:53.711 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:53.712 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:53.712 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:53.716 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:53.716 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:53.716 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:53.717 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:53.717 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:53.969 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:53.970 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:53.970 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:53.970 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:53.970 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:53.971 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:53.971 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:53.975 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:53.975 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:53.975 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:53.976 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:53.976 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:54.167 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:54.168 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:54.168 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:54.168 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:54.169 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:54.170 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:54.170 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:54.175 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:54.175 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:54.176 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:54.176 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:54.176 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:54.329 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:54.330 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:54.330 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:54.330 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:54.331 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:54.332 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:54.332 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:54.337 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:54.337 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:54.337 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:54.338 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:54.338 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:54.542 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:54.543 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:54.546 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:54.547 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:54.547 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:54.547 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:54.547 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:54.719 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:54.720 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:54.720 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:54.720 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:54.721 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:54.721 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:54.721 [http-nio-8080-exec-10] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:54.725 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:54.726 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:54.726 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:54.727 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:54.727 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:54.910 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:54.911 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:54.911 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:54.911 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:54.911 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:54.912 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:54.912 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:54.915 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:54.916 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:54.916 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:54.916 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:54.916 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:55.089 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:55.089 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:55.090 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:55.090 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:55.090 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:55.091 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:55.091 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:55.094 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:55.095 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:55.095 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:55.095 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:55.095 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:55.301 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:55.301 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:55.302 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:55.302 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:55.303 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:55.303 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:55.303 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:55.309 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:55.309 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:55.309 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:55.310 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:55.310 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:55.485 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:55.486 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:55.486 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:55.486 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:55.486 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:55.487 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:55.487 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:55.490 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:55.491 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:55.491 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:55.491 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:55.491 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:55.671 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:55.672 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:55.672 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:55.672 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:55.672 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:55.673 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:55.673 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:55.678 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:55.678 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:55.678 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:55.679 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:55.679 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:55.888 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:55.888 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:55.888 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:55.889 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:55.889 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:55.890 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:55.890 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:55.894 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:55.894 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:55.895 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:55.905 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:55.906 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:56.131 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:56.132 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:56.132 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:56.132 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:56.133 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:56.134 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:56.134 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:56.138 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:56.138 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:56.139 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:56.139 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:56.139 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:56.363 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:56.363 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:56.363 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:56.363 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:56.364 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:56.364 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:56.364 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:56.368 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:56.369 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:56.369 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:56.370 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:56.370 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:56.582 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:56.582 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:56.582 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:56.582 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:56.583 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:56.583 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:56.583 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:56.588 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:56.588 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:56.588 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:56.589 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:56.589 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:56.789 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:56.790 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:56.790 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:56.790 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:56.790 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:56.791 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:56.791 [http-nio-8080-exec-10] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:56.795 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:56.795 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:56.796 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:56.796 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:56.796 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:57.013 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:57.014 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:57.014 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:57.014 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:57.015 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:57.015 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:57.015 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:57.019 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:57.019 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:57.019 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:57.020 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:57.020 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:57.449 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:57.449 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:57.449 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:57.449 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:57.450 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:57.450 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:57.450 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:57.453 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:57.453 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:57.454 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:57.454 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:57.454 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:57.713 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:57.714 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:57.714 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:57.714 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:57.715 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:57.715 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:57.715 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:57.720 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:57.720 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:57.721 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:57.721 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:57.721 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:58.012 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:58.013 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:58.013 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:58.013 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:58.013 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:58.013 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:58.014 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:58.017 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:58.017 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:58.017 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:58.018 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:58.018 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:58.288 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:58.289 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:58.289 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:58.289 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:58.289 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:58.290 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:58.290 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:58.294 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:58.294 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:58.294 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:58.295 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:58.295 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:58.522 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:58.523 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:58.523 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:58.523 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:58.524 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:58.524 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:58.524 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:58.528 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:58.529 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:58.529 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:58.529 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:58.530 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:58.837 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:58.838 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:58.838 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:58.838 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:58.838 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:58.839 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:58.839 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:58.842 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:58.843 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:58.843 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:58.844 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:58.844 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:59.069 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:59.070 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:59.070 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:59.070 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:59.071 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:59.071 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:59.071 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:59.075 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:59.076 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:59.076 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:59.077 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:59.077 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:59.316 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:59.317 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:59.321 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:59.322 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:59.322 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:59.322 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:59.322 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:59.557 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:59.557 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:59.557 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:59.557 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:59.558 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:59.558 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:59.558 [http-nio-8080-exec-10] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:59.562 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:59.562 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:59.562 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:59.562 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:59.563 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:59.770 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:59.771 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:59.771 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:59.771 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:59.772 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:59.772 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:59.772 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:59.777 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:59.778 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:59.778 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:59.778 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:59.779 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:13:59.964 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:13:59.964 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:13:59.964 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:13:59.964 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:13:59.965 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:13:59.965 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:13:59.965 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:13:59.970 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:13:59.971 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:13:59.971 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:13:59.972 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:13:59.972 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:14:13.155 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:14:13.155 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:14:13.156 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:14:13.156 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:14:13.156 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e4', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:14:13.157 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e4
2025-09-01 00:14:13.157 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:14:13.162 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e4 | Total: $1450.00
2025-09-01 00:14:13.162 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:14:13.162 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:14:13.163 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:14:13.163 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:15:08.663 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (0 additions, 0 deletions, 42 modifications)
2025-09-01 00:15:08.664 [Thread-73] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:15:08.665 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:15:08.743 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:15:08.743 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:15:08.743 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:15:08.881 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:15:08.883 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:15:08.920 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:15:08.920 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:15:08.920 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:15:08.924 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:15:08.924 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 180 ms
2025-09-01 00:15:08.942 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:15:08.948 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:15:08.953 [cluster-ClusterId{value='68b4bb5c90846375795be349', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3956538, minRoundTripTimeNanos=0}
2025-09-01 00:15:08.989 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:15:09.001 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:15:09.020 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:15:09.025 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 11184b99-a7d6-41ee-a36d-e69b6b32e59d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:15:09.026 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:15:09.030 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:15:09.039 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:15:09.042 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:15:09.068 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:15:09.076 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:15:09.084 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.368 seconds (process running for 2376.155)
2025-09-01 00:15:09.085 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:15:09.094 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:15:09.100 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:15:09.100 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:15:09.102 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:17:00.743 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1731358 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:17:00.744 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:17:00.745 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:17:00.764 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:17:01.447 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:17:01.469 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:17:01.778 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@31c56721, com.mongodb.Jep395RecordCodecProvider@4cd51e4e, com.mongodb.KotlinCodecProvider@7e451790]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:17:01.795 [cluster-ClusterId{value='68b4bbcd8b794406bbcd93c5', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=13296799, minRoundTripTimeNanos=0}
2025-09-01 00:17:02.113 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:17:02.198 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:17:02.282 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:17:02.301 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c20d32a3-8111-4d00-a5d7-231bc1eee469

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:17:02.306 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:17:02.356 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:17:02.454 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:02.480 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:02.637 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.204 seconds (process running for 3.574)
2025-09-01 00:17:02.670 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:17:02.752 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:17:02.763 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:17:02.763 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:17:03.095 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.096 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.096 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.099 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.099 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.100 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.147 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.182 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:17:03.241 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:17:03.243 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:17:03.243 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:17:03.253 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.255 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:17:03.285 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.288 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.288 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.288 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.288 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.288 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.290 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.292 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:17:03.333 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:17:03.339 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.340 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.341 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.341 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.341 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.341 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.344 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.347 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.362 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:17:03.362 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:17:03.363 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:17:03.366 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.371 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:17:03.390 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.392 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.393 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.393 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.393 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.393 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.394 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:17:03.395 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.396 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={version=1.0.0, name= (truncated)...]
2025-09-01 00:17:03.403 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.404 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.405 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.405 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.407 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.409 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.417 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:17:03.421 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.423 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.423 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.423 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.423 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.423 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.425 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.426 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.435 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:17:03.439 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.440 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.441 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.441 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.441 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.441 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.442 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:17:03.442 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:17:03.443 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.443 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:17:03.448 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.449 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.450 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.450 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.450 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.450 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.451 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.453 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:17:03.460 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:17:03.465 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.466 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.466 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.466 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.466 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.467 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:17:03.468 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.470 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.477 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:17:03.477 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:17:03.477 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:17:03.479 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.479 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:17:03.486 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.487 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.487 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.487 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.487 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.487 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.489 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.491 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:17:03.497 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:17:03.497 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:17:03.497 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:17:03.499 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.499 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:17:03.504 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.505 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.505 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.505 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.506 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.506 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.507 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.509 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.516 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:17:03.516 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:17:03.516 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:17:03.518 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.518 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:17:03.522 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.523 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.524 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.524 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.524 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.524 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:17:03.526 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.527 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.533 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:17:03.533 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:17:03.534 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:17:03.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:17:03.553 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:17:03.554 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:17:03.554 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:17:03.554 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:17:03.554 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:17:03.555 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:17:03.557 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:17:03.558 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:17:03.564 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:17:03.564 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:17:03.565 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:17:03.566 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:17:03.566 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:17:03.577 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:17:00 AST 2025
2025-09-01 00:18:25.885 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1734128 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:18:25.886 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:18:25.887 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:18:25.902 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:18:26.496 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:18:26.511 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:18:26.753 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@1b800a11, com.mongodb.Jep395RecordCodecProvider@3faa55, com.mongodb.KotlinCodecProvider@1ab502f6]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:18:26.763 [cluster-ClusterId{value='68b4bc2241e4d06fed01d3d5', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=9869596, minRoundTripTimeNanos=0}
2025-09-01 00:18:27.020 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:18:27.097 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:18:27.182 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:18:27.201 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c1e88499-cb1b-4268-9cca-726cf48daebb

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:18:27.207 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:18:27.261 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:18:27.339 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:27.376 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:27.640 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.046 seconds (process running for 3.348)
2025-09-01 00:18:27.691 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:18:27.803 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:18:27.824 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:18:27.824 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:18:28.359 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.362 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.362 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.364 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.364 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.365 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:18:28.410 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.441 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:18:28.506 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:18:28.507 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:18:28.508 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:18:28.516 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.518 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:18:28.552 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.554 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.554 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.554 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.554 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.555 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:18:28.556 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.558 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:18:28.587 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:18:28.592 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.593 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.593 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.593 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.594 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.594 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.597 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.599 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.608 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:18:28.608 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:18:28.608 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:18:28.609 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.612 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:18:28.625 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.626 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.626 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.626 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.626 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.626 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.627 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:18:28.628 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.628 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={status=running, endp (truncated)...]
2025-09-01 00:18:28.635 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.636 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.637 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.637 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.637 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.637 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.639 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.641 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.652 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:18:28.657 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.658 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.658 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.658 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.658 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.658 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.660 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.662 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.669 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:18:28.673 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.674 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.675 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.675 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.675 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.675 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.675 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:18:28.675 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:18:28.677 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.677 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:18:28.684 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.685 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.686 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.686 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.686 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.686 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.687 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.688 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:18:28.695 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:18:28.698 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.699 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.699 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.700 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.700 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.700 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.702 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.704 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.711 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:18:28.712 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:18:28.712 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:18:28.713 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.713 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:18:28.720 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.721 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.722 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.722 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.722 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.722 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.723 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.725 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:18:28.731 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:18:28.731 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:18:28.732 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:18:28.733 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.734 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:18:28.739 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.740 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.740 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.741 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.741 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.741 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.743 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.744 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.751 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:18:28.751 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:18:28.751 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:18:28.753 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.753 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:18:28.758 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.759 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.760 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.760 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.760 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.760 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.762 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.763 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.770 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:18:28.770 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:18:28.770 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:18:28.771 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.771 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:18:28.782 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:18:28.784 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:28.784 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:28.784 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:18:28.784 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:18:28.784 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:18:28.786 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:18:28.787 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:18:28.793 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:18:28.794 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:18:28.794 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:18:28.795 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:18:28.795 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:18:28.806 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:18:25 AST 2025
2025-09-01 00:18:56.199 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:18:56.202 [Thread-77] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:18:56.204 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:18:56.294 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:18:56.294 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:18:56.294 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:18:56.509 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:18:56.512 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:18:56.557 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:18:56.558 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:18:56.558 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:18:56.562 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:18:56.562 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 267 ms
2025-09-01 00:18:56.583 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:18:56.590 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:18:56.594 [cluster-ClusterId{value='68b4bc4090846375795be34a', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3726623, minRoundTripTimeNanos=0}
2025-09-01 00:18:56.630 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:18:56.642 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:18:56.660 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:18:56.666 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 9d62330f-70d4-44ad-b8f2-09a3003d8e4a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:18:56.666 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:18:56.672 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:18:56.682 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:56.685 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:56.719 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:18:56.728 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:18:56.735 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.456 seconds (process running for 2603.806)
2025-09-01 00:18:56.736 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:18:56.745 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:18:56.752 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:18:56.752 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:18:56.753 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:18:58.123 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:18:58.124 [Thread-81] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:18:58.125 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:18:58.210 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:18:58.210 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:18:58.210 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:18:58.355 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:18:58.357 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:18:58.404 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:18:58.404 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:18:58.404 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:18:58.408 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:18:58.408 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 197 ms
2025-09-01 00:18:58.423 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:18:58.432 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:18:58.434 [cluster-ClusterId{value='68b4bc4290846375795be34b', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1876235, minRoundTripTimeNanos=0}
2025-09-01 00:18:58.464 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:18:58.474 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:18:58.492 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:18:58.496 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b0228d40-a67e-4a7d-ad4c-9b41fb2ad0cd

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:18:58.497 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:18:58.501 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:18:58.509 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:18:58.512 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:18:58.535 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:18:58.543 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:18:58.550 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.361 seconds (process running for 2605.621)
2025-09-01 00:18:58.551 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:18:58.559 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:18:58.565 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:18:58.565 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:18:58.566 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:18:58.866 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1735430 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:18:58.867 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:18:58.867 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:18:58.883 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:18:59.506 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:18:59.522 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:18:59.791 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@e4348c0, com.mongodb.Jep395RecordCodecProvider@4ca907af, com.mongodb.KotlinCodecProvider@3ef396c9]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:18:59.808 [cluster-ClusterId{value='68b4bc4399a0746762f4c4f1', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=11537485, minRoundTripTimeNanos=0}
2025-09-01 00:19:00.086 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:19:00.160 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:19:00.235 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:19:00.255 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f24188d6-ba29-4e3b-a9f8-c6513bb3253b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:19:00.259 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:19:00.309 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:19:00.401 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:00.430 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:00.587 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.05 seconds (process running for 3.728)
2025-09-01 00:19:00.617 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:19:00.708 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:19:00.721 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:19:00.722 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:19:01.053 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.054 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.054 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.056 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.056 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.057 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.096 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.121 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:19:01.176 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:01.177 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:01.177 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:01.186 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.188 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:19:01.223 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.225 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.225 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.225 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.225 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.225 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.227 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.228 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:19:01.248 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:19:01.253 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.255 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.255 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.255 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.255 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.255 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.259 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.261 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.269 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:01.269 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:01.269 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:19:01.271 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.273 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:01.284 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.285 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.285 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.285 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.285 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.286 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.286 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:19:01.288 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.289 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={description=RESTful  (truncated)...]
2025-09-01 00:19:01.296 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.298 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.298 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.298 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.298 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.298 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.300 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.302 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.310 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:19:01.316 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.317 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.317 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.317 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.317 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.317 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.319 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.320 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.327 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:19:01.332 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.332 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.333 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.333 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.333 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.333 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.333 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:19:01.333 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:19:01.335 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.335 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:19:01.340 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.341 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.341 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.341 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.341 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.341 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.342 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.343 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:19:01.350 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:19:01.355 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.356 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.356 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.356 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.358 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.359 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.365 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:01.365 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:19:01.366 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:19:01.367 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.367 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:01.373 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.374 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.375 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.375 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.375 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.375 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.376 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.378 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:19:01.384 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:19:01.384 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:01.384 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:01.387 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.387 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:19:01.392 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.393 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.393 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.393 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.393 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.393 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.396 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.402 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:01.402 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:01.403 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:01.405 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.405 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:19:01.409 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.410 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.410 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.410 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.410 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.410 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.412 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.415 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.423 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:19:01.423 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:19:01.424 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:19:01.425 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.425 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:01.436 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:01.437 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:01.438 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:01.438 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:01.438 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:01.438 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:01.439 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:01.441 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:01.446 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:01.446 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:01.447 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:19:01.448 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:01.448 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:01.460 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:18:58 AST 2025
2025-09-01 00:19:12.954 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:19:12.955 [Thread-85] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:19:12.956 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:19:13.064 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:19:13.064 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:19:13.064 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:19:13.307 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:19:13.315 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:19:13.379 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:19:13.380 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:19:13.380 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:19:13.384 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:19:13.384 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 319 ms
2025-09-01 00:19:13.421 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:19:13.429 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'billCalculationService' defined in file [/home/abdullah/Desktop/billing-discounts-api/target/classes/sa/billing/discounts/application/service/BillCalculationService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-09-01 00:19:13.429 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-01 00:19:13.437 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-01 00:19:13.441 [restartedMain] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in sa.billing.discounts.application.service.BillCalculationService required a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' in your configuration.

2025-09-01 00:19:14.858 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:19:14.858 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:19:14.858 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:19:15.018 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:19:15.026 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:19:15.057 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:19:15.057 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:19:15.058 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:19:15.062 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:19:15.062 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 203 ms
2025-09-01 00:19:15.094 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:19:15.102 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:19:15.104 [cluster-ClusterId{value='68b4bc5390846375795be34c', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1408997, minRoundTripTimeNanos=0}
2025-09-01 00:19:15.139 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:19:15.149 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:19:15.171 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:19:15.176 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: d0e0e52a-74f5-459f-be76-d6b851d6220f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:19:15.177 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:19:15.181 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:19:15.188 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:15.191 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:15.213 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:19:15.220 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:19:15.227 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.382 seconds (process running for 2622.297)
2025-09-01 00:19:15.228 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:19:15.236 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:19:15.244 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:19:15.244 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:19:15.246 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:19:15.916 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1736380 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:19:15.916 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:19:15.917 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:19:15.942 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:19:16.530 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:19:16.546 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:19:16.815 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4cd51e4e, com.mongodb.Jep395RecordCodecProvider@7e451790, com.mongodb.KotlinCodecProvider@25172993]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:19:16.834 [cluster-ClusterId{value='68b4bc54a60e383c48cde431', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=14085084, minRoundTripTimeNanos=0}
2025-09-01 00:19:17.148 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:19:17.232 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:19:17.340 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:19:17.359 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c4a6afb4-daf8-4501-a434-b1c4a68f7978

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:19:17.365 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:19:17.418 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:19:17.526 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:17.559 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:17.742 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.114 seconds (process running for 3.551)
2025-09-01 00:19:17.793 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:19:17.882 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:19:17.892 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:19:17.892 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:19:18.216 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.217 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.217 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.219 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.219 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.219 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.265 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.295 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:19:18.354 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:18.355 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:18.355 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:18.364 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.366 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:19:18.403 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.404 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.405 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.405 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.406 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.408 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:19:18.431 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:19:18.435 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.437 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.437 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.437 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.437 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.437 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.440 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.443 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.451 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:18.451 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:18.452 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:19:18.453 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.455 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:18.465 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.466 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.466 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.466 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.466 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.466 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.467 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:19:18.468 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.469 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={endpoints={api-docs= (truncated)...]
2025-09-01 00:19:18.475 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.476 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.476 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.476 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.476 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.476 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.478 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.480 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.487 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:19:18.492 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.493 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.493 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.493 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.493 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.493 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.495 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.497 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.504 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:19:18.508 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.509 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.510 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.510 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.510 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.510 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.510 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:19:18.510 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:19:18.512 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:19:18.517 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.518 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.519 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.519 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.520 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.521 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:19:18.530 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:19:18.535 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.536 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.536 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.536 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.537 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.537 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.538 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.540 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.546 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:18.546 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:19:18.547 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:19:18.548 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.548 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:18.555 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.556 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.556 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.556 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.556 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.556 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.558 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.559 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:19:18.566 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:19:18.566 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:18.566 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:18.568 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.568 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:19:18.573 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.574 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.574 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.574 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.574 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.575 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:19:18.576 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.577 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.584 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:18.584 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:18.584 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:19:18.586 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.586 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:19:18.590 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.591 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.591 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.592 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.592 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.592 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.593 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.594 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.600 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:19:18.600 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:19:18.600 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:19:18.601 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.601 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:18.611 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:19:18.612 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:19:18.612 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:19:18.613 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:19:18.613 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:19:18.613 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:19:18.614 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:19:18.615 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:19:18.621 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:19:18.622 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:19:18.622 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:19:18.623 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:19:18.623 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:19:18.634 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:19:15 AST 2025
2025-09-01 00:20:20.509 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 0 deletions, 46 modifications)
2025-09-01 00:20:20.510 [Thread-89] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:20:20.511 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:20:20.578 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:20:20.578 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:20:20.578 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:20:20.699 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:20:20.701 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:20:20.733 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:20:20.734 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:20:20.734 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:20:20.737 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:20:20.738 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 159 ms
2025-09-01 00:20:20.751 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:20:20.757 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:20:20.759 [cluster-ClusterId{value='68b4bc9490846375795be34d', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2173863, minRoundTripTimeNanos=0}
2025-09-01 00:20:20.801 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:20:20.811 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:20:20.827 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:20:20.832 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: bd02696d-bc62-4c1e-8b12-4fd90a97ebfd

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:20:20.833 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:20:20.836 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:20:20.844 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:20.848 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:20.876 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:20:20.884 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:20:20.891 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.328 seconds (process running for 2687.962)
2025-09-01 00:20:20.892 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:20:20.900 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:20:20.904 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:20:20.905 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:20:20.906 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:20:21.739 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1738776 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:20:21.740 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:20:21.741 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:20:21.760 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:20:22.422 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:20:22.442 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:20:22.709 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@a1d926b, com.mongodb.Jep395RecordCodecProvider@36b761e3, com.mongodb.KotlinCodecProvider@e27d97b]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:20:22.726 [cluster-ClusterId{value='68b4bc968103f67c146b5f56', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=12969854, minRoundTripTimeNanos=0}
2025-09-01 00:20:23.055 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:20:23.139 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:20:23.224 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:20:23.244 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b1042d0f-063b-4935-bd26-71ec1b51b7e5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:20:23.250 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:20:23.306 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:20:23.427 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:23.462 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:23.636 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.209 seconds (process running for 3.61)
2025-09-01 00:20:23.670 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:20:23.769 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:20:23.783 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:20:23.784 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:20:24.128 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.130 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.130 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.132 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.132 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.132 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.175 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.206 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:20:24.272 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:20:24.273 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:20:24.274 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:20:24.283 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.286 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:20:24.331 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.333 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.333 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.333 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.333 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.334 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:20:24.335 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.337 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:20:24.361 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:20:24.365 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.366 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.367 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.367 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.367 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.367 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.370 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.372 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.380 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:20:24.380 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:20:24.380 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:20:24.382 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.384 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:20:24.393 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.394 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.394 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.394 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.394 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.394 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:20:24.396 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.396 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={version=1.0.0, endpo (truncated)...]
2025-09-01 00:20:24.403 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.404 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.405 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.405 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.405 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.407 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.408 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.418 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:20:24.423 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.424 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.425 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.425 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.425 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.425 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.427 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.428 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.435 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:20:24.440 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.441 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.441 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.441 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.441 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.441 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.442 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:20:24.442 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:20:24.443 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.443 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:20:24.448 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.449 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.449 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.449 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.449 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.450 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:20:24.450 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.451 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:20:24.459 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:20:24.464 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.465 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.465 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.465 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.467 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.468 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.474 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:20:24.474 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:20:24.475 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:20:24.476 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.476 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:20:24.484 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.485 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.485 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.485 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.485 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.485 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.487 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.488 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:20:24.494 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:20:24.494 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:20:24.494 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:20:24.496 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.496 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:20:24.501 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.502 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.502 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.502 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.502 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.502 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.504 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.505 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.511 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:20:24.511 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:20:24.511 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:20:24.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:20:24.517 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.519 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.519 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.519 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.521 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.522 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.527 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:20:24.527 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:20:24.528 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:20:24.529 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.529 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:20:24.545 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:20:24.547 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:20:24.547 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:20:24.548 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:20:24.548 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:20:24.548 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:20:24.551 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:20:24.552 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:20:24.557 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:20:24.557 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:20:24.558 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:20:24.558 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:20:24.559 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:20:24.574 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:20:21 AST 2025
2025-09-01 00:22:43.464 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:22:43.466 [Thread-96] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:22:43.468 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:22:43.549 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:22:43.549 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:22:43.549 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:22:43.716 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:22:43.719 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:22:43.749 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:22:43.750 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:22:43.750 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:22:43.756 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:22:43.756 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 206 ms
2025-09-01 00:22:43.778 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:22:43.785 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'billCalculationService' defined in file [/home/abdullah/Desktop/billing-discounts-api/target/classes/sa/billing/discounts/application/service/BillCalculationService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-09-01 00:22:43.786 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-01 00:22:43.799 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-01 00:22:43.803 [restartedMain] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in sa.billing.discounts.application.service.BillCalculationService required a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' in your configuration.

2025-09-01 00:22:45.220 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:22:45.221 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:22:45.221 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:22:45.369 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:22:45.371 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:22:45.411 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:22:45.411 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:22:45.411 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:22:45.415 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:22:45.415 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 194 ms
2025-09-01 00:22:45.428 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:22:45.434 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:22:45.438 [cluster-ClusterId{value='68b4bd2590846375795be34e', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3140370, minRoundTripTimeNanos=0}
2025-09-01 00:22:45.468 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:22:45.478 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:22:45.495 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:22:45.500 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 957b8e28-005a-45ed-a89f-6a137447192e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:22:45.500 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:22:45.505 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:22:45.513 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:45.516 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:45.541 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:22:45.549 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:22:45.556 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.346 seconds (process running for 2832.627)
2025-09-01 00:22:45.557 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:22:45.566 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:22:45.573 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:22:45.573 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:22:45.574 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:22:46.091 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1743588 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:22:46.092 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:22:46.093 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:22:46.108 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:22:46.772 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:22:46.789 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:22:47.066 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@1ab502f6, com.mongodb.Jep395RecordCodecProvider@2a8e30e3, com.mongodb.KotlinCodecProvider@31c56721]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:22:47.084 [cluster-ClusterId{value='68b4bd27988981885d44ef4d', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=11434010, minRoundTripTimeNanos=0}
2025-09-01 00:22:47.385 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:22:47.459 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:22:47.524 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:22:47.540 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ddcf0f22-0004-40fe-bc37-c20489681f31

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:22:47.545 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:22:47.590 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:22:47.669 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:47.694 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:47.859 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.066 seconds (process running for 3.594)
2025-09-01 00:22:47.892 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:22:47.968 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:22:47.978 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:22:47.979 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:22:48.297 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.298 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.298 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.300 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.300 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.300 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.340 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.367 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:22:48.429 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:22:48.431 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:22:48.432 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:22:48.441 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.442 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:22:48.470 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.472 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.472 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.472 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.473 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.473 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.474 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.476 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:22:48.492 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:22:48.501 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.502 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.502 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.502 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.502 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.503 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:22:48.506 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.508 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.519 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:22:48.519 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:22:48.519 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:22:48.521 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.523 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:22:48.532 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.533 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.533 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.533 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.533 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.533 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.534 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:22:48.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={endpoints={api-docs= (truncated)...]
2025-09-01 00:22:48.543 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.544 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.544 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.544 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.544 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.544 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.546 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.548 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.556 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:22:48.560 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.561 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.562 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.562 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.562 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.562 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.564 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.565 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.573 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:22:48.577 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.578 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.579 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.579 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.579 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.579 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.580 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:22:48.580 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:22:48.581 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.581 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:22:48.587 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.588 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.588 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.588 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.588 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.589 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:22:48.589 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.591 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:22:48.598 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:22:48.603 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.604 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.605 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.611 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.611 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.611 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.613 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.615 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.630 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:22:48.630 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:22:48.630 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:22:48.632 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.632 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:22:48.642 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.644 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.644 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.644 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.646 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.647 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:22:48.654 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:22:48.654 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:22:48.655 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:22:48.656 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.657 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:22:48.661 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.663 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.663 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.663 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.663 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.663 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.665 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.666 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.672 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:22:48.673 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:22:48.673 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:22:48.674 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.675 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:22:48.679 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.680 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.680 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.681 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.681 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.681 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.682 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.684 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.690 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:22:48.690 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:22:48.690 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:22:48.691 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.692 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:22:48.710 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:22:48.711 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:22:48.712 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:22:48.712 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:22:48.712 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:22:48.712 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:22:48.714 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:22:48.715 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:22:48.722 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:22:48.722 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:22:48.722 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:22:48.723 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:22:48.723 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:22:48.734 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:22:46 AST 2025
2025-09-01 00:23:15.380 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 0 deletions, 46 modifications)
2025-09-01 00:23:15.381 [Thread-100] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:23:15.382 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:23:15.464 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:23:15.464 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:23:15.464 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:23:15.616 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:23:15.618 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:23:15.650 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:23:15.651 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:23:15.651 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:23:15.654 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:23:15.654 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 189 ms
2025-09-01 00:23:15.668 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:23:15.674 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:23:15.676 [cluster-ClusterId{value='68b4bd4390846375795be34f', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2053196, minRoundTripTimeNanos=0}
2025-09-01 00:23:15.706 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:23:15.715 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:23:15.731 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:23:15.736 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 243118b7-37b4-4eeb-86ba-44104a4061d6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:23:15.736 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:23:15.741 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:23:15.749 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:15.752 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:15.774 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:23:15.781 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:23:15.787 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.342 seconds (process running for 2862.858)
2025-09-01 00:23:15.788 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:23:15.793 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:23:15.799 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:23:15.799 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:23:15.800 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:23:16.877 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1745141 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:23:16.878 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:23:16.878 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:23:16.896 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0
2025-09-01 00:23:17.583 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:23:17.603 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:23:17.895 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4cd51e4e, com.mongodb.Jep395RecordCodecProvider@7e451790, com.mongodb.KotlinCodecProvider@25172993]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:23:17.912 [cluster-ClusterId{value='68b4bd4521f688fcd903803e', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=10587284, minRoundTripTimeNanos=0}
2025-09-01 00:23:18.203 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:23:18.276 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:23:18.357 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:23:18.375 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: d528ce26-5436-4dd4-9a0d-7aa99e6d6969

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:23:18.382 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:23:18.428 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:23:18.513 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:18.540 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:18.693 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.125 seconds (process running for 3.634)
2025-09-01 00:23:18.734 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:23:18.806 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:23:18.821 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:23:18.821 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:23:19.143 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.145 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.145 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.147 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.147 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.147 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.183 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.221 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:23:19.288 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:23:19.289 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:23:19.289 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:23:19.304 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.306 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:23:19.340 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.342 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.343 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.343 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.344 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.344 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.345 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.347 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:23:19.362 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:23:19.366 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.367 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.368 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.368 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.368 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.368 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.371 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.373 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.381 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:23:19.381 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:23:19.382 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:23:19.383 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.386 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:23:19.394 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.396 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.396 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.396 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.396 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.396 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:23:19.398 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.398 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={endpoints={swagger=/ (truncated)...]
2025-09-01 00:23:19.404 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.405 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.405 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.406 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.406 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.406 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.407 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.409 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.416 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:23:19.421 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.422 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.423 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.423 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.423 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.423 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.424 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.426 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.434 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:23:19.439 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.440 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.440 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.440 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.440 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.440 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.441 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:23:19.441 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:23:19.442 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.442 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:23:19.448 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.449 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.449 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.450 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.450 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.450 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.450 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.452 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:23:19.459 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:23:19.463 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.464 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.465 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.465 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.466 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.468 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.475 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:23:19.475 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:23:19.475 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:23:19.477 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.477 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:23:19.484 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.485 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.485 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.485 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.485 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.485 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.487 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.488 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:23:19.494 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:23:19.494 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:23:19.495 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:23:19.496 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.496 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:23:19.501 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.502 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.502 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.502 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.502 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.502 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.504 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.505 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.512 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:23:19.512 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:23:19.512 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:23:19.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:23:19.518 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.519 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.519 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.519 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.519 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.521 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.522 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.528 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:23:19.528 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:23:19.528 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:23:19.529 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.530 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:23:19.540 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:23:19.541 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:19.541 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:19.541 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:23:19.541 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:23:19.541 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:23:19.543 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:23:19.544 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:23:19.551 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:23:19.551 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:23:19.551 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:23:19.553 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:23:19.553 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:23:19.565 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2b44d6d0, started on Mon Sep 01 00:23:16 AST 2025
2025-09-01 00:23:56.029 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 0 deletions, 46 modifications)
2025-09-01 00:23:56.031 [Thread-107] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:23:56.032 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:23:56.108 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:23:56.108 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:23:56.108 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:23:56.276 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:23:56.278 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:23:56.317 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:23:56.318 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:23:56.318 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:23:56.328 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:23:56.328 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 218 ms
2025-09-01 00:23:56.343 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:23:56.349 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:23:56.352 [cluster-ClusterId{value='68b4bd6c90846375795be350', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1836555, minRoundTripTimeNanos=0}
2025-09-01 00:23:56.388 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:23:56.398 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:23:56.416 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:23:56.421 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 69a1f73c-2531-4193-88aa-e61abab7b746

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:23:56.422 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:23:56.426 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:23:56.434 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:23:56.437 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:23:56.461 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:23:56.470 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:23:56.478 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.388 seconds (process running for 2903.549)
2025-09-01 00:23:56.479 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:23:56.486 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:23:56.491 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:23:56.491 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:23:56.492 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:23:59.282 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1746995 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:23:59.284 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:23:59.285 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:23:59.335 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5390862e
2025-09-01 00:24:00.496 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:24:00.526 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:24:01.058 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@1e69a310, com.mongodb.Jep395RecordCodecProvider@300f715, com.mongodb.KotlinCodecProvider@448ca967]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:24:01.086 [cluster-ClusterId{value='68b4bd700d923a7c2dd4d93d', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=21558520, minRoundTripTimeNanos=0}
2025-09-01 00:24:01.862 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:24:02.028 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:24:02.266 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:24:02.314 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b0d0ec14-6a89-41fa-9783-e5a13285d569

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:24:02.328 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:24:02.412 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:24:02.616 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:02.671 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:02.969 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 4.229 seconds (process running for 7.268)
2025-09-01 00:24:03.010 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:24:03.142 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:24:03.162 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:24:03.162 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:24:03.672 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:03.675 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:03.675 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:03.680 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:03.681 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:03.682 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:24:03.782 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:03.834 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:24:03.919 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:24:03.921 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:24:03.922 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:24:03.937 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:03.942 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:24:03.996 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:03.998 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:03.998 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:03.998 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:03.998 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:03.998 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.000 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.003 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:24:04.035 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:24:04.041 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.042 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.042 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.042 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.042 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.048 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.051 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.063 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:24:04.063 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:24:04.063 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:24:04.065 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.068 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:24:04.080 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.082 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.083 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.083 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.083 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.084 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:24:04.084 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:24:04.088 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.088 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={name=Billing Discoun (truncated)...]
2025-09-01 00:24:04.105 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.108 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.109 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.109 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.109 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.110 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.114 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.118 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.128 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:24:04.133 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.136 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.136 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.136 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.136 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.137 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.139 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.141 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.149 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:24:04.154 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.155 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.155 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.156 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.156 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.156 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.156 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:24:04.156 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:24:04.158 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.159 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:24:04.166 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.168 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.168 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.168 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.168 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.168 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.169 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.171 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:24:04.179 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:24:04.183 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.184 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.185 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.185 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.185 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.185 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.187 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.189 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.196 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:24:04.196 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:24:04.196 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:24:04.198 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.198 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:24:04.207 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.208 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.208 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.208 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.208 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.208 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.210 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.213 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:24:04.218 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:24:04.219 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:24:04.219 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:24:04.221 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.222 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:24:04.228 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.229 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.229 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.229 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.229 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.230 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.232 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.236 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.251 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:24:04.251 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:24:04.252 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:24:04.255 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.256 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:24:04.262 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.263 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.263 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.263 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.263 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.263 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.265 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.267 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.276 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:24:04.276 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:24:04.277 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:24:04.278 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.278 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:24:04.299 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:24:04.302 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:24:04.303 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:24:04.303 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:24:04.303 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:24:04.303 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:24:04.307 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:24:04.309 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:24:04.320 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:24:04.320 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:24:04.321 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:24:04.322 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:24:04.323 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:24:04.336 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5390862e, started on Mon Sep 01 00:23:59 AST 2025
2025-09-01 00:25:30.985 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:25:30.987 [Thread-111] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:25:30.987 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:25:31.070 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:25:31.071 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:25:31.071 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:25:31.229 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:25:31.231 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:25:31.264 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:25:31.264 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:25:31.264 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:25:31.268 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:25:31.268 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 196 ms
2025-09-01 00:25:31.282 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:25:31.292 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:25:31.294 [cluster-ClusterId{value='68b4bdcb90846375795be351', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1973070, minRoundTripTimeNanos=0}
2025-09-01 00:25:31.324 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:25:31.334 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:25:31.351 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:25:31.356 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ec8e784b-c8ca-45cf-a391-e1cc7b27d3b8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:25:31.356 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:25:31.360 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:25:31.368 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:31.371 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:31.394 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:25:31.402 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:25:31.409 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.356 seconds (process running for 2998.48)
2025-09-01 00:25:31.410 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:25:31.419 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:25:31.425 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:25:31.425 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:25:31.426 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:25:32.797 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:25:32.798 [Thread-115] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:25:32.799 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:25:32.870 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:25:32.870 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:25:32.870 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:25:32.993 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:25:32.997 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:25:33.034 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:25:33.034 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:25:33.035 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:25:33.042 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:25:33.042 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 172 ms
2025-09-01 00:25:33.057 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:25:33.063 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:25:33.065 [cluster-ClusterId{value='68b4bdcd90846375795be352', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1851618, minRoundTripTimeNanos=0}
2025-09-01 00:25:33.100 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:25:33.115 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:25:33.130 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:25:33.135 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 0d0570a5-1e4a-4f16-88cc-92a083d0ca37

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:25:33.135 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:25:33.139 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:25:33.145 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:33.148 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:33.183 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:25:33.191 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:25:33.198 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.34 seconds (process running for 3000.269)
2025-09-01 00:25:33.199 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:25:33.206 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:25:33.210 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:25:33.211 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:25:33.211 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:25:34.812 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1750159 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:25:34.813 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:25:34.814 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:25:34.849 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5390862e
2025-09-01 00:25:35.894 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:25:35.918 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:25:36.372 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@29810fa0, com.mongodb.Jep395RecordCodecProvider@54f3fd30, com.mongodb.KotlinCodecProvider@460a31ce]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:25:36.396 [cluster-ClusterId{value='68b4bdd03513b7c24615dd43', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=21427078, minRoundTripTimeNanos=0}
2025-09-01 00:25:36.872 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:25:36.997 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:25:37.125 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:25:37.163 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: df9120c1-0f8f-41fd-895e-6ef945f378aa

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:25:37.170 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:25:37.248 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:25:37.368 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:37.408 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:37.616 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.39 seconds (process running for 5.995)
2025-09-01 00:25:37.649 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:25:37.753 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:25:37.771 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:25:37.771 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:25:38.169 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.171 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.171 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.173 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.174 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.174 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.249 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.295 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:25:38.388 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:25:38.390 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:25:38.391 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:25:38.401 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.403 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:25:38.451 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.453 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.454 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.454 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.454 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.454 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.456 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.459 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:25:38.482 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:25:38.487 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.488 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.489 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.489 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.489 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.489 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.494 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.496 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.508 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:25:38.508 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:25:38.509 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:25:38.510 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.514 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:25:38.530 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.531 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.531 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.531 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.531 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.532 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:25:38.532 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:25:38.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.535 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={status=running, endp (truncated)...]
2025-09-01 00:25:38.546 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.547 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.548 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.548 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.548 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.548 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.550 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.553 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.564 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:25:38.568 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.570 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.570 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.571 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.571 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.571 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.573 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.575 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.582 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:25:38.587 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.588 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.588 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.588 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.588 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.588 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.589 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:25:38.589 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:25:38.591 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.591 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:25:38.596 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.597 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.597 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.597 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.597 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.597 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.598 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.600 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:25:38.609 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:25:38.613 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.615 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.615 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.615 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.615 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.615 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.617 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.619 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.626 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:25:38.626 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:25:38.626 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:25:38.628 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.629 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:25:38.638 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.639 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.639 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.639 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.639 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.639 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.642 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.643 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:25:38.649 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:25:38.650 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:25:38.650 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:25:38.652 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.652 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:25:38.658 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.659 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.659 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.659 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.659 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.659 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.661 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.663 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.669 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:25:38.670 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:25:38.670 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:25:38.672 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.673 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:25:38.678 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.679 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.679 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.679 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.679 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.680 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:25:38.682 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.683 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.689 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:25:38.689 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:25:38.690 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:25:38.691 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.691 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:25:38.706 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:25:38.707 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:25:38.707 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:25:38.707 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:25:38.707 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:25:38.707 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:25:38.709 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:25:38.711 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:25:38.718 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:25:38.718 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:25:38.718 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:25:38.720 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:25:38.720 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:25:38.732 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5390862e, started on Mon Sep 01 00:25:34 AST 2025
2025-09-01 00:26:04.709 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1751213 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:26:04.710 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:26:04.710 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:26:04.745 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5390862e
2025-09-01 00:26:05.851 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:26:05.876 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:26:06.320 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@428fef32, com.mongodb.Jep395RecordCodecProvider@5393c04, com.mongodb.KotlinCodecProvider@44a83ca4]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:26:06.337 [cluster-ClusterId{value='68b4bdeea55c63135bb6c087', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=22295652, minRoundTripTimeNanos=0}
2025-09-01 00:26:06.807 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:26:06.922 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:26:07.036 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:26:07.068 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 99bbbf9e-5dd5-4071-9694-0120a87cd982

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:26:07.077 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:26:07.154 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:26:07.285 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:07.330 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:07.535 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.382 seconds (process running for 6.132)
2025-09-01 00:26:07.578 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:26:07.690 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:26:07.703 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:26:07.704 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:26:08.186 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.188 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.189 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.192 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.192 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.193 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.275 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.325 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:26:08.406 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:26:08.407 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:26:08.408 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:26:08.418 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.420 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:26:08.463 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.465 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.465 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.465 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.467 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.470 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:26:08.489 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:26:08.495 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.497 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.497 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.497 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.497 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.497 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.502 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.505 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.516 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:26:08.516 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:26:08.517 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:26:08.519 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.523 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:26:08.536 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.537 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.537 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.537 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.537 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.537 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.538 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:26:08.539 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.540 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={status=running, endp (truncated)...]
2025-09-01 00:26:08.547 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.549 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.549 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.550 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.550 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.550 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.552 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.554 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.562 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:26:08.567 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.568 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.569 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.569 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.569 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.569 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.571 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.574 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.581 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:26:08.586 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.588 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.588 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.588 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.588 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.588 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.589 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:26:08.589 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:26:08.592 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.593 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:26:08.602 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.604 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.604 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.604 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.604 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.604 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.605 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.607 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:26:08.614 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:26:08.619 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.621 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.621 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.621 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.621 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.621 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.623 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.626 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.632 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:26:08.632 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:26:08.632 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:26:08.634 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.634 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:26:08.643 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.644 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.644 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.644 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.645 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:26:08.647 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.648 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:26:08.654 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:26:08.654 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:26:08.654 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:26:08.657 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.657 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:26:08.665 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.667 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.668 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.668 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.668 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.669 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.672 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.676 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.683 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:26:08.683 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:26:08.684 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:26:08.686 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.686 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:26:08.696 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.698 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.698 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.698 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.698 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.699 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:26:08.702 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.705 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.718 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:26:08.719 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:26:08.719 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:26:08.722 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.722 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:26:08.748 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:26:08.750 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:26:08.751 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:26:08.751 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:26:08.751 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:26:08.751 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:26:08.754 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:26:08.756 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:26:08.762 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:26:08.762 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:26:08.762 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:26:08.764 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:26:08.764 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:26:08.778 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5390862e, started on Mon Sep 01 00:26:04 AST 2025
2025-09-01 00:27:07.972 [http-nio-8080-exec-1] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-01 00:27:07.973 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-01 00:27:07.973 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-09-01 00:27:07.973 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-09-01 00:27:07.973 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-09-01 00:27:07.974 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3f63dd3f
2025-09-01 00:27:07.974 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@31a424a3
2025-09-01 00:27:07.974 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-01 00:27:07.974 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:27:07.975 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:07.976 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:07.976 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:07.976 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:07.981 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:07.986 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:07.986 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:07.990 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:07.992 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:07.994 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:07.996 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:07.996 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:08.541 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:08.541 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:08.541 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:08.541 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:08.542 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:08.542 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:08.542 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:08.547 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:08.548 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:08.548 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:08.549 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:08.549 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:08.750 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:08.751 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:08.751 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:08.751 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:08.752 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:08.752 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:08.752 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:08.756 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:08.757 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:08.757 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:08.758 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:08.758 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:08.918 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:08.918 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:08.918 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:08.918 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:08.919 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:08.920 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:08.920 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:08.925 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:08.926 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:08.926 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:08.927 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:08.927 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:09.120 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:09.120 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:09.120 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:09.121 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:09.121 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:09.122 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:09.122 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:09.127 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:09.127 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:09.127 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:09.128 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:09.128 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:09.312 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:09.312 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:09.313 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:09.313 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:09.313 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:09.313 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:09.313 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:09.318 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:09.318 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:09.318 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:09.319 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:09.319 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:09.499 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:09.499 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:09.499 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:09.499 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:09.500 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:09.500 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:09.500 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:09.504 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:09.505 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:09.505 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:09.506 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:09.506 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:09.703 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:09.703 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:09.704 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:09.704 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:09.704 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:09.704 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:09.704 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:09.708 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:09.708 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:09.708 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:09.709 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:09.709 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:09.891 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:09.891 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:09.891 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:09.892 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:09.892 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:09.893 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:09.893 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:09.898 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:09.898 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:09.898 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:09.899 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:09.899 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:10.252 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:10.253 [http-nio-8080-exec-10] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:10.253 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:10.253 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:10.254 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:10.255 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:10.255 [http-nio-8080-exec-10] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:10.259 [http-nio-8080-exec-10] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $4875.00
2025-09-01 00:27:10.259 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:10.259 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:10.260 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:10.260 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:11.427 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:11.428 [http-nio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:11.428 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:11.428 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:11.428 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:11.429 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:11.429 [http-nio-8080-exec-1] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:11.433 [http-nio-8080-exec-1] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:27:11.433 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:11.434 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:11.434 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:11.435 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:11.706 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:11.707 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:11.707 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:11.707 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:11.707 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:11.708 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:11.708 [http-nio-8080-exec-2] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:11.713 [http-nio-8080-exec-2] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:27:11.713 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:11.713 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:11.714 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:11.714 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:11.916 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:11.917 [http-nio-8080-exec-3] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:11.917 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:11.917 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:11.918 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:11.919 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:11.919 [http-nio-8080-exec-3] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:11.922 [http-nio-8080-exec-3] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:27:11.923 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:11.923 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:11.923 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:11.923 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:12.088 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:12.089 [http-nio-8080-exec-4] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:12.089 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:12.089 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:12.090 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:12.090 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:12.090 [http-nio-8080-exec-4] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:12.094 [http-nio-8080-exec-4] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $114.80
2025-09-01 00:27:12.095 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:12.095 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:12.096 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:12.096 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:13.153 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:13.154 [http-nio-8080-exec-5] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:13.154 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:13.154 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:13.159 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:13.159 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:13.159 [http-nio-8080-exec-5] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:13.163 [http-nio-8080-exec-5] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $975.00
2025-09-01 00:27:13.164 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:13.164 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:13.164 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:13.164 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:13.671 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:13.671 [http-nio-8080-exec-6] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:13.671 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:13.672 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:13.673 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:13.674 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:13.674 [http-nio-8080-exec-6] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:13.678 [http-nio-8080-exec-6] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $975.00
2025-09-01 00:27:13.679 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:13.679 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:13.681 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:13.682 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:13.902 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:13.902 [http-nio-8080-exec-7] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:13.902 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:13.902 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:13.903 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:13.903 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:13.903 [http-nio-8080-exec-7] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:13.907 [http-nio-8080-exec-7] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $975.00
2025-09-01 00:27:13.907 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:13.907 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:13.908 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:13.908 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:14.081 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:27:14.082 [http-nio-8080-exec-8] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:27:14.086 [http-nio-8080-exec-8] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $975.00
2025-09-01 00:27:14.087 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:14.087 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:14.087 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:14.088 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:14.901 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /api/v1/bills/calculate
2025-09-01 00:27:14.902 [http-nio-8080-exec-9] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /api/v1/bills/calculate
2025-09-01 00:27:14.902 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/bills/calculate", parameters={}
2025-09-01 00:27:14.902 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:27:14.903 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:27:14.904 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:27:14.904 [http-nio-8080-exec-9] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:27:14.912 [http-nio-8080-exec-9] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $1443.95
2025-09-01 00:27:14.912 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:27:14.913 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:27:14.913 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-09-01 00:27:14.913 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-01 00:27:51.169 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:27:51.170 [Thread-119] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:27:51.171 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:27:51.253 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:27:51.253 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:27:51.253 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:27:51.422 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:27:51.427 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:27:51.474 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:27:51.474 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:27:51.474 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:27:51.478 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:27:51.478 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 224 ms
2025-09-01 00:27:51.492 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:27:51.497 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'billCalculationService' defined in file [/home/abdullah/Desktop/billing-discounts-api/target/classes/sa/billing/discounts/application/service/BillCalculationService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-09-01 00:27:51.497 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-01 00:27:51.505 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-01 00:27:51.509 [restartedMain] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in sa.billing.discounts.application.service.BillCalculationService required a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'sa.billing.discounts.infrastructure.persistence.repository.CustomerRepository' in your configuration.

2025-09-01 00:27:52.924 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:27:52.924 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:27:52.924 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:27:53.057 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:27:53.059 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:27:53.108 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:27:53.108 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:27:53.108 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:27:53.112 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:27:53.113 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 187 ms
2025-09-01 00:27:53.127 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:27:53.133 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:27:53.136 [cluster-ClusterId{value='68b4be5990846375795be353', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2031546, minRoundTripTimeNanos=0}
2025-09-01 00:27:53.170 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:27:53.180 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:27:53.197 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:27:53.201 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 67d9e12e-a50a-4043-88bf-22518dfccff8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:27:53.202 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:27:53.206 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:27:53.214 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:27:53.216 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:27:53.239 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:27:53.248 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:27:53.255 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.34 seconds (process running for 3140.325)
2025-09-01 00:27:53.255 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:27:53.263 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:27:53.267 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:27:53.267 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:27:53.268 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:27:55.538 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1755310 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:27:55.539 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:27:55.539 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:27:55.569 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5390862e
2025-09-01 00:27:57.116 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:27:57.187 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:27:57.926 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@35977ba7, com.mongodb.Jep395RecordCodecProvider@1762be43, com.mongodb.KotlinCodecProvider@64f5a6ec]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:27:57.950 [cluster-ClusterId{value='68b4be5d48068eee8a683202', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=22393290, minRoundTripTimeNanos=0}
2025-09-01 00:27:58.519 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:27:58.663 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:27:58.777 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:27:58.801 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 75ad3ce0-a69b-459f-9811-3baf054cf324

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:27:58.816 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:27:58.906 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:27:59.053 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:27:59.097 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:27:59.347 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 4.367 seconds (process running for 7.391)
2025-09-01 00:27:59.391 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:27:59.516 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:27:59.538 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:27:59.538 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:28:00.053 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.056 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.057 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.061 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.062 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.062 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.177 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.241 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:28:00.356 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:28:00.358 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:28:00.359 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:28:00.374 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.377 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:28:00.441 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.443 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.443 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.444 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.444 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.444 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.447 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.450 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:28:00.475 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:28:00.480 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.482 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.482 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.482 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.482 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.483 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.487 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.490 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.505 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:28:00.505 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:28:00.506 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:28:00.508 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.513 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:28:00.532 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.535 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.536 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.536 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.536 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.536 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.537 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:28:00.539 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.539 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={version=1.0.0, endpo (truncated)...]
2025-09-01 00:28:00.550 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.552 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.552 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.553 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.553 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.553 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.556 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.560 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.571 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:28:00.576 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.578 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.578 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.579 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.579 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.579 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.582 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.586 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.595 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:28:00.601 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.602 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.603 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.603 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.603 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.603 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.604 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:28:00.605 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:28:00.608 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.609 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:28:00.617 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.618 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.619 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.619 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.619 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.619 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.620 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.622 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:28:00.631 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:28:00.639 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.642 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.642 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.643 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.643 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.648 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.652 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.664 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:28:00.664 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:28:00.664 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:28:00.667 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.667 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:28:00.685 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.688 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.689 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.689 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.689 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.690 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:28:00.694 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.698 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:28:00.713 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:28:00.713 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:28:00.714 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:28:00.719 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.720 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:28:00.732 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.735 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.735 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.736 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.736 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.736 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.740 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.744 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.751 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:28:00.752 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:28:00.752 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:28:00.755 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.755 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:28:00.762 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.765 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.765 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.765 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.765 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.765 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.769 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.772 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.778 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:28:00.778 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:28:00.779 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:28:00.780 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.780 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:28:00.805 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:28:00.807 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:28:00.807 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:28:00.807 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:28:00.807 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:28:00.807 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:28:00.810 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:28:00.812 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:28:00.820 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:28:00.820 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:28:00.820 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:28:00.822 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:28:00.822 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:28:00.839 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5390862e, started on Mon Sep 01 00:27:55 AST 2025
2025-09-01 00:36:56.383 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:36:56.385 [Thread-123] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:36:56.385 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:36:56.463 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:36:56.463 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:36:56.463 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:36:56.661 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:36:56.663 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:36:56.699 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:36:56.699 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:36:56.699 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:36:56.703 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:36:56.703 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 239 ms
2025-09-01 00:36:56.718 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:36:56.725 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:36:56.727 [cluster-ClusterId{value='68b4c07890846375795be354', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1653948, minRoundTripTimeNanos=0}
2025-09-01 00:36:56.779 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:36:56.793 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:36:56.821 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:36:56.831 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 35cacb48-e939-45a8-9a4c-d64354410a7c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:36:56.832 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:36:56.843 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:36:56.864 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:36:56.872 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:36:56.950 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:36:56.973 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:36:56.982 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.538 seconds (process running for 3684.053)
2025-09-01 00:36:56.983 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:36:56.993 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:36:57.000 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:36:57.000 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:36:57.001 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:36:58.353 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:36:58.362 [Thread-130] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:36:58.367 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:36:58.471 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:36:58.471 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:36:58.471 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:36:58.631 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:36:58.633 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:36:58.664 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:36:58.665 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:36:58.665 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:36:58.668 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:36:58.668 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 196 ms
2025-09-01 00:36:58.682 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:36:58.691 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:36:58.693 [cluster-ClusterId{value='68b4c07a90846375795be355', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2071485, minRoundTripTimeNanos=0}
2025-09-01 00:36:58.730 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:36:58.744 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:36:58.762 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:36:58.767 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: d0f32ad4-e0cc-43c6-bc1c-e7d5ae8542bf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:36:58.767 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:36:58.772 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:36:58.779 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:36:58.782 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:36:58.822 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:36:58.836 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:36:58.848 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.393 seconds (process running for 3685.919)
2025-09-01 00:36:58.849 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:36:58.860 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:36:58.865 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:36:58.865 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:36:58.866 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:40:06.891 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 0 deletions, 46 modifications)
2025-09-01 00:40:06.893 [Thread-134] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:40:06.894 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:40:06.964 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:40:06.964 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:40:06.964 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:40:07.090 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:40:07.092 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:40:07.121 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:40:07.121 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:40:07.121 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:40:07.124 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:40:07.124 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 160 ms
2025-09-01 00:40:07.137 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:40:07.142 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:40:07.144 [cluster-ClusterId{value='68b4c13790846375795be356', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1647799, minRoundTripTimeNanos=0}
2025-09-01 00:40:07.171 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:40:07.180 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:40:07.200 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:40:07.204 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ae6b6eb2-d444-4d54-9a4d-35462be90355

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:40:07.204 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:40:07.208 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:40:07.215 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:07.217 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:07.237 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:40:07.244 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:40:07.250 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.299 seconds (process running for 3874.321)
2025-09-01 00:40:07.250 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:40:07.256 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:40:07.260 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:40:07.260 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:40:07.261 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:40:22.667 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:40:22.668 [Thread-138] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:40:22.669 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:40:22.745 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:40:22.745 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:40:22.745 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:40:22.951 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:40:22.954 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:40:23.004 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:40:23.004 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:40:23.005 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:40:23.010 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:40:23.011 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 265 ms
2025-09-01 00:40:23.034 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:40:23.047 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:40:23.049 [cluster-ClusterId{value='68b4c14790846375795be357', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1457683, minRoundTripTimeNanos=0}
2025-09-01 00:40:23.083 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:40:23.091 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:40:23.105 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:40:23.109 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 20c3921a-9fec-4ccf-9df8-f757b00283d3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:40:23.109 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:40:23.113 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:40:23.120 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:23.122 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:23.143 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:40:23.150 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:40:23.156 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.424 seconds (process running for 3890.227)
2025-09-01 00:40:23.157 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:40:23.165 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:40:23.168 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:40:23.168 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:40:23.169 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:40:24.547 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:40:24.549 [Thread-142] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:40:24.550 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:40:24.607 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:40:24.607 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:40:24.607 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:40:24.708 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:40:24.710 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:40:24.737 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:40:24.737 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:40:24.737 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:40:24.740 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:40:24.740 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 132 ms
2025-09-01 00:40:24.753 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:40:24.761 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:40:24.763 [cluster-ClusterId{value='68b4c14890846375795be358', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1569450, minRoundTripTimeNanos=0}
2025-09-01 00:40:24.788 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:40:24.798 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:40:24.812 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:40:24.816 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 994913a9-7525-4805-8b28-e19befb969fa

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:40:24.816 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:40:24.820 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:40:24.827 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:24.830 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:24.850 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:40:24.857 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:40:24.863 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.266 seconds (process running for 3891.934)
2025-09-01 00:40:24.863 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:40:24.869 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:40:24.872 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:40:24.872 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:40:24.873 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:40:37.467 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 0 deletions, 46 modifications)
2025-09-01 00:40:37.469 [Thread-146] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:40:37.470 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:40:37.549 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:40:37.550 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:40:37.550 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:40:37.661 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:40:37.663 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:40:37.695 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:40:37.695 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:40:37.695 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:40:37.700 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:40:37.700 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 150 ms
2025-09-01 00:40:37.714 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:40:37.721 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:40:37.723 [cluster-ClusterId{value='68b4c15590846375795be359', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1627378, minRoundTripTimeNanos=0}
2025-09-01 00:40:37.750 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:40:37.759 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:40:37.775 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:40:37.780 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 221d5627-5e43-4a66-8ef2-c52f58de34e2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:40:37.780 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:40:37.784 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:40:37.792 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:37.794 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:37.817 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:40:37.825 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:40:37.832 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.296 seconds (process running for 3904.902)
2025-09-01 00:40:37.832 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:40:37.840 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:40:37.845 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:40:37.845 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:40:37.845 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:40:39.927 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1779654 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:40:39.929 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:40:39.929 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:40:39.962 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5390862e
2025-09-01 00:40:40.908 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:40:40.932 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:40:41.361 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@300f715, com.mongodb.Jep395RecordCodecProvider@448ca967, com.mongodb.KotlinCodecProvider@400a5164]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:40:41.381 [cluster-ClusterId{value='68b4c1598efe8acbe3d70383', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=14305509, minRoundTripTimeNanos=0}
2025-09-01 00:40:41.790 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:40:41.889 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:40:41.989 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:40:42.017 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 87e8e2c0-8212-4fe0-b657-94ad633a8606

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:40:42.023 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:40:42.095 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:40:42.193 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:42.231 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:42.411 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 3.033 seconds (process running for 5.542)
2025-09-01 00:40:42.445 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:40:42.537 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:40:42.549 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:40:42.549 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:40:42.928 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:42.931 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:42.932 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:42.935 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:42.935 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:42.936 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.020 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.063 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:40:43.145 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:40:43.146 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:40:43.147 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:40:43.157 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.159 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:40:43.197 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.199 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.199 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.200 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.200 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.200 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.202 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.205 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:40:43.226 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:40:43.231 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.233 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.233 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.233 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.234 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.234 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.238 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.241 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.250 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:40:43.250 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:40:43.251 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:40:43.252 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.255 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:40:43.266 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.267 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.268 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.268 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.268 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.268 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.268 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:40:43.270 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.270 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={version=1.0.0, name= (truncated)...]
2025-09-01 00:40:43.280 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.282 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.282 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.282 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.282 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.283 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:40:43.285 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.287 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.295 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:40:43.300 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.302 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.302 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.302 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.302 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.302 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.304 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.307 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.315 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:40:43.319 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.321 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.321 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.321 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.321 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.321 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.322 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:40:43.322 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:40:43.330 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.330 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:40:43.336 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.338 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.338 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.338 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.338 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.338 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.339 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.341 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:40:43.348 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:40:43.352 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.354 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.354 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.354 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.354 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.354 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.356 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.358 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.364 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:40:43.365 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:40:43.365 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:40:43.367 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.367 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:40:43.379 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.380 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.380 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.380 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.380 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.381 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.384 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.387 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:40:43.402 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:40:43.402 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:40:43.403 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:40:43.407 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.408 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:40:43.415 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.417 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.417 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.417 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.418 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.418 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.422 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.426 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.437 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:40:43.437 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:40:43.438 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:40:43.440 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.440 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:40:43.446 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.447 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.447 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.448 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.448 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.448 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.450 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.452 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.458 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:40:43.458 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:40:43.459 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:40:43.460 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.460 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:40:43.478 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:40:43.479 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:40:43.479 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:40:43.480 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:40:43.480 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:40:43.480 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:40:43.482 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:40:43.484 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:40:43.490 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:40:43.490 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:40:43.490 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:40:43.492 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:40:43.492 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:40:43.506 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@5390862e, started on Mon Sep 01 00:40:39 AST 2025
2025-09-01 00:52:38.270 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:52:38.272 [Thread-150] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:52:38.274 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:52:38.357 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:52:38.357 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:52:38.357 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:52:38.571 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:52:38.573 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:52:38.608 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:52:38.609 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:52:38.610 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:52:38.613 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:52:38.613 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 255 ms
2025-09-01 00:52:38.631 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:52:38.638 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:52:38.641 [cluster-ClusterId{value='68b4c42690846375795be35a', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2439926, minRoundTripTimeNanos=0}
2025-09-01 00:52:38.707 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:52:38.719 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:52:38.746 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:52:38.751 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 94bd8534-6387-4f54-82bc-682ec78f342a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:52:38.751 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:52:38.756 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:52:38.767 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:52:38.770 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:52:38.805 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:52:38.817 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:52:38.825 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.486 seconds (process running for 4625.896)
2025-09-01 00:52:38.827 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:52:38.837 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:52:38.842 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:52:38.842 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:52:38.842 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:52:40.208 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:52:40.210 [Thread-154] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:52:40.210 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:52:40.272 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:52:40.272 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:52:40.272 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:52:40.385 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:52:40.387 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:52:40.419 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:52:40.420 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:52:40.420 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:52:40.424 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:52:40.424 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 152 ms
2025-09-01 00:52:40.439 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:52:40.444 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:52:40.446 [cluster-ClusterId{value='68b4c42890846375795be35b', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1747885, minRoundTripTimeNanos=0}
2025-09-01 00:52:40.473 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:52:40.481 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:52:40.496 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:52:40.500 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 368155bc-8d37-4792-af79-59907f36ed18

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:52:40.500 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:52:40.504 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:52:40.510 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:52:40.513 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:52:40.533 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:52:40.540 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:52:40.547 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.286 seconds (process running for 4627.618)
2025-09-01 00:52:40.548 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:52:40.554 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:52:40.557 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:52:40.557 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:52:40.558 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:54:29.495 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 46 class path changes (0 additions, 42 deletions, 4 modifications)
2025-09-01 00:54:29.497 [Thread-158] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:54:29.498 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:54:29.582 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:54:29.582 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:54:29.582 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:54:29.718 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:54:29.720 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:54:29.752 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:54:29.753 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:54:29.753 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:54:29.756 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:54:29.756 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 173 ms
2025-09-01 00:54:29.768 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:54:29.775 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:54:29.777 [cluster-ClusterId{value='68b4c49590846375795be35c', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1750412, minRoundTripTimeNanos=0}
2025-09-01 00:54:29.809 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:54:29.818 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:54:29.834 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:54:29.839 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ba36f060-a137-4016-9409-5f1104a3b2bc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:54:29.839 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:54:29.843 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:54:29.851 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:54:29.854 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:54:29.877 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:54:29.884 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:54:29.891 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.323 seconds (process running for 4736.962)
2025-09-01 00:54:29.892 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:54:29.899 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:54:29.903 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:54:29.903 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:54:29.904 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:54:31.281 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 42 class path changes (42 additions, 0 deletions, 0 modifications)
2025-09-01 00:54:31.282 [Thread-162] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-01 00:54:31.283 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-01 00:54:31.347 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Starting BillingDiscountsApiApplication using Java 17.0.16 with PID 1642989 (/home/abdullah/Desktop/billing-discounts-api/target/classes started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:54:31.347 [restartedMain] DEBUG s.billing.discounts.BillingDiscountsApiApplication - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:54:31.347 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - The following 1 profile is active: "dev"
2025-09-01 00:54:31.456 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:54:31.458 [restartedMain] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:54:31.483 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-09-01 00:54:31.484 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-01 00:54:31.484 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-01 00:54:31.487 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-01 00:54:31.487 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 139 ms
2025-09-01 00:54:31.500 [restartedMain] DEBUG o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-01 00:54:31.507 [restartedMain] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Microsoft/17.0.16+8-LTS"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@68639958, com.mongodb.Jep395RecordCodecProvider@6d93dc87, com.mongodb.KotlinCodecProvider@c6313db]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:54:31.510 [cluster-ClusterId{value='68b4c49790846375795be35d', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1947556, minRoundTripTimeNanos=0}
2025-09-01 00:54:31.532 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:54:31.540 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:54:31.553 [restartedMain] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:54:31.557 [restartedMain] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 30f5e719-d55d-4fd1-8b1c-9c7b277af723

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:54:31.557 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:54:31.561 [restartedMain] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:54:31.567 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:54:31.569 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:54:31.589 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-09-01 00:54:31.596 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-09-01 00:54:31.603 [restartedMain] INFO  s.billing.discounts.BillingDiscountsApiApplication - Started BillingDiscountsApiApplication in 0.267 seconds (process running for 4738.674)
2025-09-01 00:54:31.604 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:54:31.610 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:54:31.614 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:54:31.614 [restartedMain] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:54:31.615 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-09-01 00:55:05.757 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1805610 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:55:05.758 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:55:05.758 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:55:05.786 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6b5e8b3a
2025-09-01 00:55:06.673 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:55:06.693 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:55:07.051 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@23e1dd4a, com.mongodb.Jep395RecordCodecProvider@2d3b13b8, com.mongodb.KotlinCodecProvider@4f724360]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:55:07.068 [cluster-ClusterId{value='68b4c4badb995c69db642fa3', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=15890529, minRoundTripTimeNanos=0}
2025-09-01 00:55:07.422 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:55:07.514 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:55:07.601 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:55:07.620 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b22f2c19-ce82-48ff-b682-1e9f36ad2710

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:55:07.626 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:55:07.695 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:55:07.801 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:07.843 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.024 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.558 seconds (process running for 6.242)
2025-09-01 00:55:08.058 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:55:08.165 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:55:08.177 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:55:08.177 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:55:08.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.397 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.397 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.400 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.400 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.400 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.470 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.510 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:55:08.591 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:08.591 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:08.592 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:08.600 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.601 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:55:08.641 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.643 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.643 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.643 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.644 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.647 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.652 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:55:08.668 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:55:08.673 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.674 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.674 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.675 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.675 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.675 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.678 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.681 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.690 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:08.690 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:08.691 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:55:08.692 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.693 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:08.705 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.706 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.706 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.706 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.706 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.706 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.706 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:55:08.708 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.708 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={endpoints={api-docs= (truncated)...]
2025-09-01 00:55:08.715 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.716 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.717 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.717 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.717 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.717 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.719 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.721 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.728 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:55:08.732 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.733 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.733 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.733 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.733 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.733 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.735 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.737 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.744 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:55:08.748 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.749 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.749 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.750 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.750 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.750 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.750 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:55:08.750 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:55:08.752 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.752 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:55:08.757 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.758 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.758 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.758 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.758 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.758 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.759 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.761 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:55:08.767 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:55:08.771 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.772 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.772 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.773 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.773 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.773 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.775 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.777 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.782 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:08.783 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:55:08.783 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:55:08.785 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.785 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:08.792 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.794 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.794 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.794 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.794 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.794 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.796 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.798 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:55:08.803 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:55:08.803 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:08.804 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:08.805 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.806 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:55:08.810 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.811 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.811 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.811 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.811 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.811 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.813 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.815 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.820 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:08.820 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:08.821 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:08.822 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.822 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:55:08.827 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.828 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.828 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.828 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.828 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.828 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.830 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.831 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.837 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:55:08.837 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:55:08.837 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:55:08.838 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.839 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:08.857 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:08.858 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:08.859 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:08.859 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:08.859 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:08.859 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:08.861 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:08.863 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:08.868 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:08.868 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:08.869 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:55:08.870 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:08.870 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:08.884 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@6b5e8b3a, started on Mon Sep 01 00:55:05 AST 2025
2025-09-01 00:55:41.553 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1806903 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:55:41.554 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:55:41.555 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:55:41.578 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6b5e8b3a
2025-09-01 00:55:42.363 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:55:42.382 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:55:42.721 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@38d87d, com.mongodb.Jep395RecordCodecProvider@6efa59d6, com.mongodb.KotlinCodecProvider@6720c88b]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:55:42.734 [cluster-ClusterId{value='68b4c4ded43e7e66dd96a9c2', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=20898872, minRoundTripTimeNanos=0}
2025-09-01 00:55:43.050 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:55:43.141 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:55:43.216 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:55:43.234 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 6765746b-9e7b-4344-9c38-2b37bfa55c8c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:55:43.239 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:55:43.306 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:55:43.406 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:43.449 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:43.628 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.355 seconds (process running for 5.618)
2025-09-01 00:55:43.653 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:55:43.750 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:55:43.762 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:55:43.763 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:55:43.997 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:43.998 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:43.999 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.001 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.001 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.002 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.069 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.113 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:55:44.191 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:44.191 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:44.191 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:44.199 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.200 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:55:44.244 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.246 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.246 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.246 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.246 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.246 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.248 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.251 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:55:44.267 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:55:44.272 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.274 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.274 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.274 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.274 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.274 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.278 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.281 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.289 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:44.289 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:44.290 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:55:44.291 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.292 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:44.301 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.302 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.303 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.303 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.303 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.303 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.303 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:55:44.305 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.305 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={status=running, endp (truncated)...]
2025-09-01 00:55:44.312 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.313 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.314 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.314 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.314 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.314 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.316 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.318 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.325 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:55:44.329 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.331 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.331 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.331 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.331 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.331 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.333 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.335 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.342 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:55:44.346 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.347 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.347 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.348 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.348 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.348 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.348 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:55:44.348 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:55:44.350 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.350 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:55:44.354 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.355 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.356 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.356 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.356 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.356 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.358 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:55:44.365 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:55:44.369 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.370 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.370 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.371 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.371 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.371 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.373 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.374 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.381 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:44.381 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:55:44.381 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:55:44.383 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.383 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:44.391 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.392 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.392 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.392 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.392 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.393 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.395 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.396 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:55:44.402 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:55:44.402 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:44.403 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:44.405 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.406 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:55:44.410 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.412 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.412 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.412 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.412 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.412 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.414 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.415 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.425 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:44.425 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:44.426 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:55:44.428 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.428 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:55:44.433 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.435 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.435 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.436 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.436 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.436 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.439 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.443 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.449 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:55:44.449 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:55:44.449 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:55:44.451 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.451 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:44.464 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:55:44.465 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:55:44.465 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:55:44.465 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:55:44.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:55:44.465 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:55:44.467 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:55:44.469 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:55:44.474 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:55:44.474 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:55:44.474 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:55:44.476 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:55:44.476 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:55:44.487 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@6b5e8b3a, started on Mon Sep 01 00:55:41 AST 2025
2025-09-01 00:56:44.882 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Starting BillingDiscountsApiApplicationTests using Java 17.0.16 with PID 1809013 (started by abdullah in /home/abdullah/Desktop/billing-discounts-api)
2025-09-01 00:56:44.883 [main] DEBUG s.b.discounts.BillingDiscountsApiApplicationTests - Running with Spring Boot v3.5.5, Spring v6.2.10
2025-09-01 00:56:44.883 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - The following 1 profile is active: "dev"
2025-09-01 00:56:44.914 [main] DEBUG o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@55e8522e
2025-09-01 00:56:45.771 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-01 00:56:45.791 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-09-01 00:56:46.141 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-data", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/17.0.16+8-Ubuntu-0ubuntu125.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3b8a02b6, com.mongodb.Jep395RecordCodecProvider@31452c9, com.mongodb.KotlinCodecProvider@342b545a]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-01 00:56:46.157 [cluster-ClusterId{value='68b4c51e5070c151a6f81cea', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=20758997, minRoundTripTimeNanos=0}
2025-09-01 00:56:46.547 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 9 mappings in 'requestMappingHandlerMapping'
2025-09-01 00:56:46.653 [main] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-01 00:56:46.765 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-01 00:56:46.791 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 0b7c648b-6ded-42ee-ac87-f1900c5dbd37

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-01 00:56:46.798 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-01 00:56:46.870 [main] DEBUG o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-01 00:56:47.005 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.046 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.204 [main] INFO  s.b.discounts.BillingDiscountsApiApplicationTests - Started BillingDiscountsApiApplicationTests in 2.597 seconds (process running for 6.007)
2025-09-01 00:56:47.236 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - starting sample data initialization...
2025-09-01 00:56:47.326 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample customers already exist, skipping customer initialization
2025-09-01 00:56:47.338 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample products already exist, skipping product initialization
2025-09-01 00:56:47.338 [main] INFO  s.b.discounts.infrastructure.data.DataInitializer - sample data initialization completed successfully!
2025-09-01 00:56:47.585 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.586 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.587 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.589 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.589 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.590 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms
2025-09-01 00:56:47.653 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.704 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='inva (truncated)...]
2025-09-01 00:56:47.780 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:56:47.781 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:56:47.782 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Product not found with ID: invalid-product-id
sa.billing.discounts.domain.exception.ProductNotFoundException: Product not found with ID: invalid-product-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidProductId(ComprehensiveControllerTest.java:279)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:56:47.789 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:47.790 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Product not found with ID: invalid-product-id', statu (truncated)...]
2025-09-01 00:56:47.835 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.837 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.837 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.837 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.837 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.838 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.839 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.842 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[]}]
2025-09-01 00:56:47.859 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items': rejected value [[]]; codes [NotEmpty.billCalculationRequest.items,NotEmpty.items,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items,items]; arguments []; default message [items]]; default message [Bill items cannot be empty]] ]
2025-09-01 00:56:47.864 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.865 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.866 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.867 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.867 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.867 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.873 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.878 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:47.887 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:56:47.887 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:56:47.887 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $589.993
2025-09-01 00:56:47.889 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:47.889 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:56:47.899 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.900 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.900 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.900 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.900 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.900 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.900 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.RootController#getApiInfo()
2025-09-01 00:56:47.902 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:47.902 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Welcome to Billing Discounts API', status='success', data={version=1.0.0, endpo (truncated)...]
2025-09-01 00:56:47.914 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.915 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.915 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.916 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.916 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.916 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.918 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.920 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:47.928 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [0]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:56:47.932 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.934 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.934 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.934 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.934 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.934 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.937 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.939 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:47.946 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'items[0].quantity': rejected value [-1]; codes [Min.billCalculationRequest.items[0].quantity,Min.billCalculationRequest.items.quantity,Min.items[0].quantity,Min.items.quantity,Min.quantity,Min.int,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.items[0].quantity,items[0].quantity]; arguments []; default message [items[0].quantity],1]; default message [Quantity must be at least 1]] ]
2025-09-01 00:56:47.950 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.951 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.951 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.951 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.951 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.951 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.952 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#healthCheck()
2025-09-01 00:56:47.952 [main] INFO  s.b.d.presentation.controller.v1.BillController - Health check requested - Service is healthy
2025-09-01 00:56:47.954 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:47.954 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill service is running', status='success', data=OK, meta={}}]
2025-09-01 00:56:47.959 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.960 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.960 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.960 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.960 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.960 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.961 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.963 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='null', items=[BillItemRequest{productId='65a1b2c3d4e5f6a7b8c9d0f1 (truncated)...]
2025-09-01 00:56:47.969 [main] WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<sa.billing.discounts.presentation.dto.ApiResponse<sa.billing.discounts.application.dto.BillCalculationResponse>> sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(sa.billing.discounts.application.dto.BillCalculationRequest): [Field error in object 'billCalculationRequest' on field 'customerId': rejected value [null]; codes [NotNull.billCalculationRequest.customerId,NotNull.customerId,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [billCalculationRequest.customerId,customerId]; arguments []; default message [customerId]]; default message [Customer ID cannot be null]] ]
2025-09-01 00:56:47.973 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.974 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.975 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.975 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.975 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.977 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.978 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:47.984 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:56:47.984 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 2
2025-09-01 00:56:47.985 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $135.00
2025-09-01 00:56:47.986 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:47.987 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:56:47.994 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:47.995 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:47.996 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:47.996 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:47.996 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:47.996 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:47.998 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:47.999 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='invalid-customer-id', items=[BillItemRequest{productId='65a1b2c3d (truncated)...]
2025-09-01 00:56:48.005 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: invalid-customer-id
2025-09-01 00:56:48.005 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:56:48.005 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: invalid-customer-id | Error: Customer not found with ID: invalid-customer-id
sa.billing.discounts.domain.exception.CustomerNotFoundException: Customer not found with ID: invalid-customer-id
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleInvalidCustomerId(ComprehensiveControllerTest.java:257)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:56:48.007 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:48.007 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Customer not found with ID: invalid-customer-id', sta (truncated)...]
2025-09-01 00:56:48.012 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:48.013 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:48.013 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:48.013 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:48.013 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:48.013 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:48.015 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:48.016 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:48.022 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:56:48.022 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:56:48.022 [main] ERROR s.b.d.presentation.controller.v1.BillController - Failed to calculate bill for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Error: Database connection failed
java.lang.RuntimeException: Database connection failed
	at sa.billing.discounts.application.service.BillCalculationService.calculateBillDiscount(BillCalculationService.java:54)
	at sa.billing.discounts.presentation.controller.v1.BillController.calculateBill(BillController.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at sa.billing.discounts.controller.ComprehensiveControllerTest.shouldHandleGenericRuntimeException(ComprehensiveControllerTest.java:366)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-09-01 00:56:48.024 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:48.024 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Failed to calculate bill: Database connection failed', status='fail', data=null (truncated)...]
2025-09-01 00:56:48.028 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:48.029 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:48.029 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:48.030 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:48.030 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:48.030 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:48.032 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:48.033 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e2', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:48.039 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e2
2025-09-01 00:56:48.039 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 4
2025-09-01 00:56:48.039 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e2 | Total: $500.00
2025-09-01 00:56:48.040 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:48.040 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:56:48.052 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
2025-09-01 00:56:48.054 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-01 00:56:48.054 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-01 00:56:48.054 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-09-01 00:56:48.054 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-09-01 00:56:48.054 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 0 ms
2025-09-01 00:56:48.056 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to sa.billing.discounts.presentation.controller.v1.BillController#calculateBill(BillCalculationRequest)
2025-09-01 00:56:48.058 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json" to [BillCalculationRequest{customerId='65a1b2c3d4e5f6a7b8c9d0e1', items=[BillItemRequest{productId='65a1 (truncated)...]
2025-09-01 00:56:48.063 [main] INFO  s.b.d.presentation.controller.v1.BillController - Processing bill calculation request for customer: 65a1b2c3d4e5f6a7b8c9d0e1
2025-09-01 00:56:48.063 [main] DEBUG s.b.d.presentation.controller.v1.BillController - Bill items count: 1
2025-09-01 00:56:48.063 [main] INFO  s.b.d.presentation.controller.v1.BillController - Bill calculation completed successfully for customer: 65a1b2c3d4e5f6a7b8c9d0e1 | Total: $150.00
2025-09-01 00:56:48.064 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-09-01 00:56:48.064 [main] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [ApiResponse{message='Bill calculated successfully', status='success', data=BillCalculationResponse{c (truncated)...]
2025-09-01 00:56:48.074 [SpringApplicationShutdownHook] DEBUG o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@55e8522e, started on Mon Sep 01 00:56:44 AST 2025
